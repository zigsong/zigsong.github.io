---
title: ìš°í…Œì½” Lv3 í•™ìŠµë¡œê·¸ - í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
date: 2021-08-20 17:14:50
tags: woowacourse
thumbnailImage: https://i.imgur.com/frkONDC.jpg
---

í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸

<!-- more -->

---

### ğŸ¤” ê³ ë¯¼

í˜ì–´ì™€ í•¨ê»˜ í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ë¥¼ ê³ ë¯¼í–ˆë˜ ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

> - ì‘ì€ ë…ë¦½ì ì¸ ë‹¨ìœ„ë¶€í„°, bottom-up ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ê²¬ê³ í•˜ê²Œ ìŒ“ì•„ê°€ê³  ì‹¶ë‹¤.
> - ì½”ë“œë¥¼ ìˆ˜ì •í•  ë•Œë§ˆë‹¤ ë¹ ë¥´ê²Œ í”¼ë“œë°±ì„ ë°›ì•„ë³¼ ìˆ˜ ìˆëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì›í•œë‹¤.
> - ì•± ì „ì²´ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šì•„ë„ ë¶€ë¶„ì ì¸ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ê¸¸ ë°”ë€ë‹¤.
> - í•¨ìˆ˜ì™€ ë°ì´í„° ëª¨í‚¹ì„ í†µí•´ ì‹¤ì œ ë™ì‘ì„ í™•ì¸í•˜ê³  ì‹¶ë‹¤.

ë¬´ì—‡ì„ ë¯¿ì„ì§€, ê·¸ë¦¬í•˜ì—¬ **ë¬´ì—‡ì„ í…ŒìŠ¤íŠ¸í•˜ì§€ ì•Šì„ì§€** ìƒê°í•´ì•¼ í–ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, React ì»´í¬ë„ŒíŠ¸ì—ì„œ ë Œë”ë§í•˜ëŠ” JSX ìš”ì†Œì— ë“±ë¡í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì˜ ë™ì‘í•  ê²ƒì´ë¼ ë¯¿ëŠ”ë‹¤. ê·¸ëŸ¬ë‚˜ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ë˜ëŠ” propsì— ë”°ë¼ ë Œë”ë§ë˜ëŠ” ë‚´ìš©ì´ ë‹¬ë¼ì§„ë‹¤ë©´ ê·¸ ë¶€ë¶„ì€ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì˜ë¯¸ê°€ ìˆë‹¤. ì‚¬ìš©ìì˜ ì–´ë–¤ ì¸í„°ë™ì…˜ì— ì˜í•´ apiê°€ í˜¸ì¶œëœë‹¤ë©´ ì´ë„ ìœ ì˜ë¯¸í•œ í…ŒìŠ¤íŠ¸ë¼ê³  ìƒê°í•œë‹¤.

ë§ì€ ê²½ìš° í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ë¥¼ **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**, **í†µí•© í…ŒìŠ¤íŠ¸**, **E2E í…ŒìŠ¤íŠ¸**ë¡œ ë‚˜ëˆ„ê³¤ í•œë‹¤. í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ E2E í…ŒìŠ¤íŠ¸ê¹Œì§€ ìˆ˜í–‰í•˜ê¸°ì—” í…ŒìŠ¤íŠ¸ ë¹„ìš©ì´ ë„ˆë¬´ë‚˜ë„ ë§ì´ ë“¤ì–´ê°ˆ ê²ƒ ê°™ê³ , ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘ìœ¼ë¡œ ì„œì„œíˆ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ í•´ ë‚˜ê°€ê¸°ë¡œ í•œ ì…ˆì´ë‹¤. ë¬¼ë¡  ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ í†µí•© í…ŒìŠ¤íŠ¸ì˜ ê²½ê³„ëŠ” ë„ˆë¬´ë‚˜ë„ ëª¨í˜¸í•˜ì§€ë§Œ.

í˜ì–´ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ë Œë”ë§ì˜ ì™„ì „í•œ ë¶„ë¦¬ë¥¼ ì›í–ˆì—ˆë‹¤. React ì»´í¬ë„ŒíŠ¸ëŠ” ì •ë§ë¡œ ë§ˆí¬ì—…ë§Œ ë Œë”ë§í•˜ê³ , ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ìƒí˜¸ì‘ìš©ì´ ë°œìƒí•˜ëŠ” ë¡œì§ë“¤ì€ ì „ë¶€ hookìœ¼ë¡œ ë¶„ë¦¬í•˜ìëŠ” ê²ƒì´ì—ˆë‹¤. ì‹¤ì œë¡œ ë‹¤ì–‘í•œ ì¶œì²˜ë“¤ì—ì„œ ê·¸ë ‡ê²Œ í•˜ê³  ìˆë‹¤ëŠ” ì ì„ ë¶€ì •í•  ìˆ˜ëŠ” ì—†ì—ˆì§€ë§Œ, ì¬ì‚¬ìš©ì„±ë„ ì—†ì–´ ë³´ì´ëŠ” hook ë¡œì§ë“¤ì„ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë„ˆë¬´ ë§ì´ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œê°€, UIë§Œ ë Œë”ë§í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¼ë©´ ì‚¬ì‹¤ìƒ container-presentational ì»´í¬ë„ŒíŠ¸ì˜ ê´€ê³„ê°€ ë˜ëŠ” ê²ƒì´ ì•„ë‹Œê°€ ê±±ì •í–ˆì—ˆë‹¤.

ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ìš´ ì½”ë“œëŠ” ì˜ëª» ì§œì—¬ì§„ ê²ƒì¼ ìˆ˜ë„ ìˆë‹¤ëŠ” ì´ì•¼ê¸°ê¹Œì§€ ë“£ê³  ì–´ëŠ ì •ë„ ë‚©ë“ì€ ë˜ì—ˆì§€ë§Œ, ë„ˆë¬´ë‚˜ë„ ë‚¯ì„¤ê³  ê°ˆê¸°ê°ˆê¸° ì°¢ê²¨ë²„ë¦¬ëŠ” ë“¯í•œ(?) ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ì¡°ê°€ ì´ˆë˜í•  í›„í­í’ì´ ê´œì‹œë¦¬ ë‘ë ¤ì›Œ ì¼ë‹¨ì€ ì»´í¬ë„ŒíŠ¸ì— ì‘ì„±í–ˆë˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ê·¸ëŒ€ë¡œ ë‘ê¸°ë¡œ í–ˆë‹¤. ì„œë¹„ìŠ¤/ë Œë”ë§ ë¡œì§ì´ í˜¼ì¬ë˜ì–´ ìˆëŠ” ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸°ê°€ ì•„ì£¼ ì‰½ì§€ëŠ” ì•Šì•˜ìœ¼ë‚˜, ì°¨ê·¼ì°¨ê·¼ ì±„ì›Œ ë‚˜ê°€ê³  ìˆë‹¤.

### react hook test

ê¸°ì¡´ì— ì‘ì„±í–ˆë˜ react hook test í¬ìŠ¤íŒ…ì€ ì•„ë˜ ë§í¬ì—ì„œ ì½ì„ ìˆ˜ ìˆë‹¤.
[msw](https://mswjs.io/)ë¥¼ ì´ìš©í•˜ì—¬ ì„œë²„ api í˜¸ì¶œì„ ëŒ€ì‹ í–ˆë‹¤.
ğŸ€ [ì—¬ê¸°ì„œ ì½ê¸°](https://zigsong.github.io/2021/08/01/fe-hook-test/)

### unit test

ìœ ë‹› í…ŒìŠ¤íŠ¸ë¼ê³  í•´ì•¼í• ì§€, ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¼ê³  í•´ì•¼í• ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ ìµœì†Œë‹¨ìœ„ì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë™ì‘í•˜ëŠ” ë¡œì§ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ì‘ì„± ì¤‘ì´ë‹¤.

ì‚¬ìš©ìì˜ íŠ¹ì • ì¸í„°ë™ì…˜ì— ë”°ë¼ react-query hookì´ í˜¸ì¶œë˜ì–´ì•¼ í•˜ëŠ” ê²½ìš° jestì˜ `toHaveBeenCalled` ë“±ì˜ assertionìœ¼ë¡œ í™•ì¸í•˜ì—¬ hookì˜ í˜¸ì¶œ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³ ì í–ˆì—ˆëŠ”ë°, í•´ë‹¹ ë¶€ë¶„ì€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„, ì¦‰ **í…ŒìŠ¤íŠ¸í•  í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„**ì´ë¼ëŠ” í˜ì–´ì˜ ì˜ê²¬ì— ë”°ë¼ ë”°ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ì£¼ì§€ ì•Šì•˜ë‹¤. ëŒ€ì‹  jestë¡œ í•´ë‹¹ hookì„ mockingí•˜ì—¬ ë°˜í™˜í•´ì•¼ í•˜ëŠ” mock dataë“¤ì„ ì‹¬ì–´ì£¼ì—ˆë‹¤.

> ğŸ‘¾ ì´ë•Œ `jest.mock`ì— ê±¸ë ¤ ìˆëŠ” ì½œë°±ì€ **í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜**ì—¬ì•¼ í•œë‹¤. ì• ì´ˆì— í•¨ìˆ˜ì˜ ë™ì‘ì„ mockingí•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì—. ë¦¬í„´ë˜ëŠ” í•¨ìˆ˜ì˜ ë¦¬í„´ê°’(ë§ì¥ë‚œ ê°™ì§€ë§Œ)ì˜ íƒ€ì…ì— ì •í™•íˆ ë§ì¶°ì„œ mock dataë¥¼ ë„£ì–´ì£¼ì!

```jsx
jest.mock("hooks/queries/useMember", () => {
  return () => ({
    userData: MOCK_USER.ZIG,
    isLogin: true,
    logout: () => console.log("logout"),
  });
});
```

`useMember` hookì€ LikeButton ì»´í¬ë„ŒíŠ¸ì— click ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ íŠ¹ì • ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤. ë”°ë¼ì„œ ì•„ë˜ì²˜ëŸ¼ ì‘ì„±í•´ì£¼ë©´, mockingëœ ë¸Œë¼ìš°ì €ì˜ ê³µê°„ì—ì„œ UIì˜ ë Œë”ë§ì´ ë°”ë€ŒëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```jsx
describe("LikeButton í…ŒìŠ¤íŠ¸", () => {
  it("ì¢‹ì•„ìš”í•˜ì§€ ì•Šì€ í”¼ë“œì—ì„œ ì¢‹ì•„ìš” ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì¢‹ì•„ìš” ìˆ˜ê°€ 1 ì¦ê°€í•œë‹¤.", async () => {
    const { getByRole, container } = customRender(
      <LikeButton feedDetail={MOCK_FEED_DETAIL} />
    );

    const likeButton = getByRole("button");
    const likeCountBefore = container.querySelector("span");

    expect(likeCountBefore).toHaveTextContent(
      MOCK_FEED_DETAIL.likes.toString()
    );

    fireEvent.click(likeButton);

    const likeCountAfter = container.querySelector("span");

    await waitFor(() => {
      expect(likeCountAfter).toHaveTextContent(
        (MOCK_FEED_DETAIL.likes + 1).toString()
      );
    });
  });
});
```

<img src="01.png" />

ì§€ê¸ˆê¹Œì§€ ê¹”ë”í•˜ê²Œ í…ŒìŠ¤íŠ¸ ì„±ê³µ!

### í…ŒìŠ¤íŠ¸ ìë™í™”

github huskyë¥¼ í†µí•´ ë¦¬ëª¨íŠ¸ ì €ì¥ì†Œì— push ì „ í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ëŒë¦´ ìˆ˜ ìˆë„ë¡ í•´ì£¼ì—ˆë‹¤.
ğŸ€ [ì—¬ê¸°ì„œ ì½ê¸°](https://zigsong.github.io/2021/08/14/woowa-week-28/#í…ŒìŠ¤íŠ¸-ìë™í™”)

---

**Ref**

- https://jbee.io/react/testing-1-react-testing/
- https://jbee.io/react/testing-2-react-testing/
- https://meetup.toast.com/posts/174
- https://blog.mathpresso.com/ëª¨ë˜-í”„ë¡ íŠ¸ì—”ë“œ-í…ŒìŠ¤íŠ¸-ì „ëµ-1í¸-841e87a613b2
- https://www.daleseo.com/jest-mock-modules/
