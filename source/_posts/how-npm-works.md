---
title: npmì€ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ
date: 2021-10-31 16:46:52
tags: npm
thumbnailImage: https://i.imgur.com/4i7MZ1Z.jpg
---

npmì€ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ

<!-- more -->

---

ì–´ëŠë‚  ê°‘ìê¸° ëˆˆëœ¨ìë§ˆì ê¶ê¸ˆí•´ì¡Œë‹¤. ê¿ˆì—ì„œ ì´ìƒí•œ ê³„ì‹œë¥¼ ë°›ì•˜ë‚˜? ì•„ë¬´ ìƒê°ì—†ì´ npmì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆëŠ”ë°, ë§Œì•½ ëˆ„êµ°ê°€ ì´ê²Œ ëŒ€ì²´ ì–´ë–»ê²Œ ëŒì•„ê°€ëŠ” ê±´ì§€ ë¬»ëŠ”ë‹¤ë©´ ëŒ€ë‹µì„ ëª»í•  ê²ƒ ê°™ì•˜ë‹¤.

### íŒ¨í‚¤ì§€ê°€ ë­˜ê¹Œ?

- íŒ¨í‚¤ì§€: `package.json`ì— ê¸°ì¬ëœ íŒŒì¼ ë˜ëŠ” ë””ë ‰í† ë¦¬
- ëª¨ë“ˆ: Node.jsì˜ `require()` ë¬¸ë²•ìœ¼ë¡œ ë¡œë“œëœ íŒŒì¼ ë˜ëŠ” ë””ë ‰í† ë¦¬. ì¼ë°˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ë¿ ì•„ë‹ˆë¼ `package.json`ì— `main` í•„ë“œë¥¼ í¬í•¨í•˜ëŠ” íŒ¨í‚¤ì§€ë„ ëª¨ë“ˆì´ ë  ìˆ˜ ìˆë‹¤.

ëŒ€ë¶€ë¶„ì˜ npm íŒ¨í‚¤ì§€ë“¤ì€ `require`ë¡œ ë¡œë“œë˜ê¸° ë•Œë¬¸ì— ëª¨ë“ˆì— í•´ë‹¹í•œë‹¤. í•˜ì§€ë§Œ npm íŒ¨í‚¤ì§€ë“¤ì´ ë°˜ë“œì‹œ ëª¨ë“ˆì¼ í•„ìš”ëŠ” ì—†ë‹¤. í•˜ì§€ë§Œ `main` í•„ë“œê°€ ì—†ë‹¤ë©´ ëª¨ë“ˆì´ ì•„ë‹ˆë‹¤.

> `main` í•­ëª©ì€ í”„ë¡œê·¸ë¨ì˜ ì‹œì‘ì ì´ ë˜ëŠ” ëª¨ë“ˆì˜ IDë‹¤. â€˜zigâ€™ë¼ëŠ” íŒ¨í‚¤ì§€ê°€ ìˆì„ ë•Œ, ì´ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œ ì‚¬ìš©ìê°€ `require('zig')`ë¥¼ ì‹¤í–‰ ì‹œ `main`ìœ¼ë¡œ ì§€ì •í•œ ëª¨ë“ˆì˜ exports ê°ì²´ê°€ ë°˜í™˜ëœë‹¤.

### íŒŒì¼ê³¼ ë””ë ‰í† ë¦¬ ì´ë¦„

`package.json` íŒŒì¼ì€ íŒ¨í‚¤ì§€ë¥¼ ì •ì˜í•œë‹¤.

`node_modules` í´ë”ëŠ” Node.jsê°€ ëª¨ë“ˆì„ ì°¾ëŠ” ìœ„ì¹˜ë‹¤.

`node_modules`ì— ìˆëŠ” íŒŒì¼ì´ë¼ë„ `package.json`ì´ ì—†ë‹¤ë©´ íŒ¨í‚¤ì§€ê°€ ì•„ë‹ˆë‹¤.

ë°˜ëŒ€ë¡œ `package.json`ì´ ìˆë”ë¼ë„ `index.js`ë‚˜ `main` í•„ë“œê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ëª¨ë“ˆì´ ì•„ë‹ˆë‹¤. ë”°ë¼ì„œ `require()`ì˜ ì¸ìë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

### ì˜ì¡´ì„± ì§€ì˜¥

Aì™€ B, C ëª¨ë“ˆì´ ìˆì„ ë•Œ, AëŠ” B v1.0ì„ í•„ìš”ë¡œ í•˜ê³ , CëŠ” B v2.0ì„ í•„ìš”ë¡œ í•œë‹¤ê³  ê°€ì •í•´ ë³´ì. ì•±ì— Aì™€ C ëª¨ë“ˆì´ ëª¨ë‘ í•„ìš”í•˜ë‹¤ë©´, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ëŠ” Bì˜ ì–´ë–¤ ë²„ì „ì„ ì œê³µí•´ì•¼ í• ê¹Œ?

ì´ë¥¼ ì˜ì¡´ì„± ì§€ì˜¥ì´ë¼ê³  í•œë‹¤.

### Node ëª¨ë“ˆ ë¡œë”

ëŒ€ë¶€ë¶„ì˜ ëª¨ë“ˆ ë¡œë”ë“¤ì€ ë©”ëª¨ë¦¬ì— ê°™ì€ ëª¨ë“ˆì— ëŒ€í•´ 2ê°€ì§€ ë²„ì „ì„ ë¡œë“œí•  ìˆ˜ ì—†ë‹¤. Node.js ëª¨ë“ˆ ë¡œë”ëŠ” ì´ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤!

npmê³¼ Node.js ëª¨ë“ˆ ë¡œë”ëŠ” ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ ìœ„í•œ ëŸ°íƒ€ì„ì—ì„œ ìœ ìš©í•˜ê²Œ ë™ì‘í•œë‹¤.

### ğŸ˜® npm install ì‹œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚ ê¹Œ?

ì˜ì¡´ì„± íŠ¸ë¦¬ì— ìˆëŠ” ëª¨ë“  ì˜ì¡´ì„±ë“¤ì„ ë¶ˆëŸ¬ì˜¨ë‹¤. ëª¨ë“  ì˜ì¡´ì„± íŒŒì¼ë“¤ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ëŒ€ì‹ , íŠ¹ì • ì˜ì¡´ì„±ì˜ ì´ë¦„ê³¼ ë²„ì „, ë˜ëŠ” github urlì„ ëª…ì‹œí•´ì¤„ ìˆ˜ë„ ìˆë‹¤.

êµ¬ì²´ì ìœ¼ë¡œ ì‚´í´ë³´ì.

`npm install`ì„ ì‹¤í–‰í•˜ë©´ `node_modules` ë˜ëŠ” `package-lock.json` íŒŒì¼ì„ í™•ì¸í•˜ê³  ì˜ì¡´ì„± íŠ¸ë¦¬(í´ë” êµ¬ì¡°)ë¥¼ ë”°ë¼ ë‚´ë ¤ê°€ë©° íŠ¸ë¦¬ë¥¼ ë³µì œí•œë‹¤.

ì´í›„ `package.json`ì—ì„œ ê´€ë ¨ìˆëŠ” ì˜ì¡´ì„±ë“¤ì„ ê°€ì ¸ì™€ íŠ¸ë¦¬ ë³µì œë³¸ì— ì¶”ê°€í•œë‹¤. ê·¸ë¦¬ê³  ì›ë³¸ íŠ¸ë¦¬ì™€ íŠ¸ë¦¬ ë³µì œë³¸ì„ ë¹„êµí•˜ë©° ì˜ì¡´ì„±ë“¤ì„ ì›ë³¸ íŠ¸ë¦¬ì— ì¶”ê°€í•œë‹¤. ì´ë•Œ ì˜ì¡´ì„±ë“¤ì€ íŠ¸ë¦¬ì˜ ë‹¤ë¥¸ ë£¨íŠ¸ë‚˜ ë¸Œëœì¹˜ë“¤ê³¼ ì¶©ëŒí•˜ì§€ ì•Šë„ë¡ ì¶”ê°€ëœë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ì›ë³¸ íŠ¸ë¦¬ì™€ íŠ¸ë¦¬ ë³µì œë³¸ì„ ë¹„êµí•˜ì—¬ `node_modules`ì— ìƒˆë¡­ê²Œ ë³µì œëœ íŠ¸ë¦¬ë¥¼ ì–»ê¸° ìœ„í•œ ë™ì‘ë“¤ì„ ìˆ˜í–‰í•œë‹¤.

> **package-lock.jsonì˜ ì—­í• **
>
> A íŒ¨í‚¤ì§€ëŠ” `B@v1.0`ì„, C íŒ¨í‚¤ì§€ëŠ” `B@v2.0`ì„ í•„ìš”ë¡œ í•  ë•Œ, ì•„ë˜ì™€ ê°™ì´ npm packageë¥¼ ì„œë¡œ ë‹¤ë¥¸ ìˆœì„œë¡œ ì„¤ì¹˜í•˜ëŠ” ë‘ ê°€ì§€ ê²½ìš°ë¥¼ ìƒê°í•´ë³´ì.

**âœ”ï¸ ì‹œë‚˜ë¦¬ì˜¤ 1**

```
npm install A
npm install C
```

**âœ”ï¸ ì‹œë‚˜ë¦¬ì˜¤ 2**

```
npm install C
npm install A
```

ë‘ ê²½ìš° ëª¨ë‘ `package.json`ì€ ì•„ë˜ì™€ ê°™ì„ ê²ƒì´ë‹¤.

```jsx
{
  "dependencies": {
    "A": "1.0.0",
    "C": "2.0.0"
  }
}
```

í•˜ì§€ë§Œ ì˜ì¡´ì„± íŠ¸ë¦¬ë¥¼ í‘œí˜„í•˜ëŠ” `package-lock.json`ì—ëŠ” ì°¨ì´ê°€ ë°œìƒí•œë‹¤.

**âœ”ï¸ ì‹œë‚˜ë¦¬ì˜¤ 1**

```jsx
{
  "dependencies": {
    "A": {
      "version": "1.0.0",
      "requires": {
        "B": "1.0.0",
      }
    },
    "B": {
      "version": "1.0.0",
    },
    "C": {
      "version": "2.0.0",
      "requires": {
        "B": "2.0.0",
      },
      "dependencies": {
        "B": {
          "version": "2.0.0",
        }
      }
    }
  }
}
```

**âœ”ï¸ ì‹œë‚˜ë¦¬ì˜¤ 2**

```jsx
{
  "dependencies": {
    "A": {
      "version": "1.0.0",
      "requires": {
        "B": "1.0.0",
      },
      "dependencies": {
        "B": {
          "version": "1.0.0",
        }
      }
    },
    "B": {
      "version": "2.0.0",
    },
    "C": {
      "version": "2.0.0",
      "requires": {
        "B": "2.0.0",
      }
    }
  }
}
```

ë§Œì•½ ì•±ì—ì„œ `B` íŒ¨í‚¤ì§€ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë¡œë“œí•œë‹¤ë©´,

```jsx
const b = require("B");
```

ì‹œë‚˜ë¦¬ì˜¤ 1ì—ì„œëŠ” `B@v1.0`ì„ ê°€ë¦¬í‚¬ ê²ƒì´ë©°, ì‹œë‚˜ë¦¬ì˜¤ 2ì—ì„œëŠ” `B@v2.0`ë¥¼ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤. ë”°ë¼ì„œ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  íŒ€ì›ë“¤ì´ ê°™ì€ ì˜ì¡´ì„± íŠ¸ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ `package-lock.json`ì„ githubì— ì˜¬ë ¤ì•¼ í•œë‹¤.

> **ğŸ¤” nvmì€ ë˜ ë­˜ê¹Œ?**
> nvmì€ node-version-managerë¡œ, ì„œë¡œ ë‹¤ë¥¸ nodeì™€ npmì˜ ë²„ì „ì„ ê´€ë¦¬í•´ì¤€ë‹¤.

---

**Ref**
https://npm.github.io/how-npm-works-docs/
https://programmingsummaries.tistory.com/385
https://dev.to/shree_j/how-npm-works-internally-4012
