{"componentChunkName":"component---src-templates-blog-post-js","path":"/frontend/s3-cloudfront/","result":{"data":{"site":{"siteMetadata":{"title":"ziglog","author":"zigsong","lang":"en"}},"markdownRemark":{"id":"e64920c1-684b-5279-98ef-4cf4505d2bcb","excerpt":"React App s3 & Cloudfront로 배포하기 리액트로 만든 앱을 s3와 Cloudfront를 이용해 배포해 보자! 1. s3 bucket 생성 s3 bucket을 생성하고, 모든 퍼블릭 액세스를 차단해준다. 이후 생성할 cloudfront…","html":"<p>React App s3 &#x26; Cloudfront로 배포하기</p>\n<!-- more -->\n<p>리액트로 만든 앱을 s3와 Cloudfront를 이용해 배포해 보자!</p>\n<h3 id=\"1-s3-bucket-생성\" style=\"position:relative;\"><a href=\"#1-s3-bucket-%EC%83%9D%EC%84%B1\" aria-label=\"1 s3 bucket 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. s3 bucket 생성</h3>\n<p>s3 bucket을 생성하고, 모든 퍼블릭 액세스를 차단해준다. 이후 생성할 cloudfront에서만 해당 버킷으로 접근이 가능하도록 설정해줄 것이다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/050914b0a6654b323271477dd96367b0/b54cd/01.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTUlEQVQoz52TbU+DMBSF+f//TP2ixuiWTRksjm4D+gIFSluOuWUbZDE6bfKkTbk9nHMp0ePTM+7uH/DytsDuWEJICS4EuFQBoRSkqqCq24iWqxVeFwssV2us4wSbNEW63SLZF/hgJWJWopQSqiLh34mOeY6Sc3RdF2jbFk3bnuYGumnQ3EhwmKZbMMZgrUXf9zPsuDfD/gDVV3WNSAgBKSX8MGA4g2kNTAyDh/Me3vupdkatNaK8KBEnCQ7HHHWtoaoaQqqxyboBk+0F3VkM3sM5d3oZLjONIMi5CPlpmwqd82NEim0tGuPQ9g7aWBjrZs5x5fAsKASyjIE+DucceVGEB3QkRDszjFEpctt1YT05nAkWRYHPXYYkScH2B+yyDJ0xodCf+nXNOfK3PaTevccbUC/pilDU/w5NgiRCfwK5ss4FQWPMHxnP0LX5AtHpVZBJ0a8hAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"01\" title=\"01\" src=\"/static/050914b0a6654b323271477dd96367b0/fcda8/01.png\" srcset=\"/static/050914b0a6654b323271477dd96367b0/12f09/01.png 148w,\n/static/050914b0a6654b323271477dd96367b0/e4a3f/01.png 295w,\n/static/050914b0a6654b323271477dd96367b0/fcda8/01.png 590w,\n/static/050914b0a6654b323271477dd96367b0/efc66/01.png 885w,\n/static/050914b0a6654b323271477dd96367b0/c83ae/01.png 1180w,\n/static/050914b0a6654b323271477dd96367b0/b54cd/01.png 1662w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"필요-시-2-정적-웹-사이트-호스팅-활성화\" style=\"position:relative;\"><a href=\"#%ED%95%84%EC%9A%94-%EC%8B%9C-2-%EC%A0%95%EC%A0%81-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8-%ED%98%B8%EC%8A%A4%ED%8C%85-%ED%99%9C%EC%84%B1%ED%99%94\" aria-label=\"필요 시 2 정적 웹 사이트 호스팅 활성화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(필요 시) 2. 정적 웹 사이트 호스팅 활성화</h3>\n<p>s3 버킷의 [속성]에서 정적 웹 사이트 호스팅을 활성화 해준다. 사실 cloudfront를 이용하여 정적 웹 사이트를 호스팅할 경우 필요하지 않은 부분이다. cloudfront를 이용하지 않고 s3 버킷의 도메인을 이용해서 정적 웹 사이트 호스팅을 해준다면 정적 웹 사이트 호스팅을 활성화해준다. 이때 도메인 접속을 위해 퍼블릭 액세스 차단을 모두 해제하거나 버킷 정책을 따로 만들어 설정해줘야 한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f99e0fa70e2fadaf8e97d0e8584ddbbe/21e8f/02.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 88.51351351351352%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACS0lEQVQ4y42Ua5ObIBSG/f+/q1/6sZ02m2hidr0gmgSjXFXw7YA2bbLZdpl5BhB5OXAu0SFN8bLdIU722MUJkv0e6fEVm5cXZAVBxzm6vv80UVGWKEqCkhBUlCIvSrxlGfxBx4KAdRxCcHDO0X+CqOt6xEmCND3icEjRNA3GccTgMQZKafAVbQyGYYB5ZP2ulELU9xxlSUBIdbOyvV5xYQyMMZzbDgUTgV4ZTNNy2PgEpTUirTXatsX1eg0n+DZjxn2bl6/zDOfcU/yatzLiesCP3R6UUlhrw8J7sIDnzf/jm7cy4lIjLymM1neLjxv+x02wVwPSvAoW0rqBkBLGDOBmQqcn6NF+SvQmOE4TGGuRZXlwDKU1/LsqM6DXYxCerMOfe6/gcb4Keo+1XOLUdmC9CHhvcmVw1Q4nacG0g7dzmrH06zjM1350gBnWK2fdgGN1wlvDcCANDmWNOCM4FBQpqbEvqjBPCorta4k4r3CgDAk5Y5vX2OU1ciYgjBfUA2rl8OXnEV+/b/AtPmJPGmzfvECNpGyweS3CfE9OQcwLJGeJuBHY1hxxw5FdDXzERL1UIOcWZ2HQ+TcbLOQ0Q1nAzAvDyt3YX9GuvQOUncO7Rz6Yq4qCsUtIISklfDoKIeCs/ZDZubugvzlFekFKUTcnCCHhfDasWOf+yeLgh7DhQqAkFUhFcb5cQhpZu2x4lmK/xdxq4TtBX0F87PliEKrGOC4WfpSzfwk/FZRShXror+wt9cLeal8sey5udY6HsUDVGRStDln0TPAXJSpvJaQp3H4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"02\" title=\"02\" src=\"/static/f99e0fa70e2fadaf8e97d0e8584ddbbe/fcda8/02.png\" srcset=\"/static/f99e0fa70e2fadaf8e97d0e8584ddbbe/12f09/02.png 148w,\n/static/f99e0fa70e2fadaf8e97d0e8584ddbbe/e4a3f/02.png 295w,\n/static/f99e0fa70e2fadaf8e97d0e8584ddbbe/fcda8/02.png 590w,\n/static/f99e0fa70e2fadaf8e97d0e8584ddbbe/efc66/02.png 885w,\n/static/f99e0fa70e2fadaf8e97d0e8584ddbbe/c83ae/02.png 1180w,\n/static/f99e0fa70e2fadaf8e97d0e8584ddbbe/21e8f/02.png 1684w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"3-빌드-후-번들-파일-업로드\" style=\"position:relative;\"><a href=\"#3-%EB%B9%8C%EB%93%9C-%ED%9B%84-%EB%B2%88%EB%93%A4-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C\" aria-label=\"3 빌드 후 번들 파일 업로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 빌드 후 번들 파일 업로드</h3>\n<p><code class=\"language-text\">yarn build</code> 후 생성된 <code class=\"language-text\">dist</code> 폴더 안의 파일들을 업로드해준다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/fa657d55bb67b24dec877604848d6c43/23814/03.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 26.351351351351354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA20lEQVQY00VO0XHFIAzL/ut0gW7Qr+7QBh5gMGAgiXp2cq8fOh2SLLTtzuEVAmprYGZkbkjcQIXtXRTlnzknMMXHq5atXTDGQO8dW0wJMREoF3CtIG6IWqrHtRo0k1LCr49I35/IXx82oLaOXAV9DCtUbbMjZsgQzDWx5o055/tXZc2pNtcyqCYils3lHlNrxSbS8eMT9iJgWaA+0eeB67pwnqeF1lrw/gXnvEF19bWQiLA7j+M4DFtrDS4SAnfImGgyjHWNFpVS7sOcEUJEiBHj8fqjJyLLyxj4A8PQgke1GlzyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"03\" title=\"03\" src=\"/static/fa657d55bb67b24dec877604848d6c43/fcda8/03.png\" srcset=\"/static/fa657d55bb67b24dec877604848d6c43/12f09/03.png 148w,\n/static/fa657d55bb67b24dec877604848d6c43/e4a3f/03.png 295w,\n/static/fa657d55bb67b24dec877604848d6c43/fcda8/03.png 590w,\n/static/fa657d55bb67b24dec877604848d6c43/efc66/03.png 885w,\n/static/fa657d55bb67b24dec877604848d6c43/c83ae/03.png 1180w,\n/static/fa657d55bb67b24dec877604848d6c43/23814/03.png 2856w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"4-cloudfront-distribution-생성\" style=\"position:relative;\"><a href=\"#4-cloudfront-distribution-%EC%83%9D%EC%84%B1\" aria-label=\"4 cloudfront distribution 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Cloudfront distribution 생성</h3>\n<p>cloudfront를 통해 방금 만든 s3 버킷에 접근해보자. 우측 [배포 생성] 버튼을 누른다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f2153c5ea7641bf51d05672177c93084/21b4d/04.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 15.54054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlUlEQVQI121PQQ4CMQjc/3/FxGfoK/RkTOy2K22B0tZkTEm8eSDMwGQGtpgSqDCaGczM+z/svDXnIoJcKlgErApthno5oVzP2EqtEFV85kTvHXNOjDHcYCw8pxss/tuvMuuuW7MVpM87+HHDthJTERzc8KYMInLhHhNeIfgVuRSoNqgq9hhBlBGOHcRvN19fhoPANvAF2ArnBF2IVLEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"04\" title=\"04\" src=\"/static/f2153c5ea7641bf51d05672177c93084/fcda8/04.png\" srcset=\"/static/f2153c5ea7641bf51d05672177c93084/12f09/04.png 148w,\n/static/f2153c5ea7641bf51d05672177c93084/e4a3f/04.png 295w,\n/static/f2153c5ea7641bf51d05672177c93084/fcda8/04.png 590w,\n/static/f2153c5ea7641bf51d05672177c93084/efc66/04.png 885w,\n/static/f2153c5ea7641bf51d05672177c93084/c83ae/04.png 1180w,\n/static/f2153c5ea7641bf51d05672177c93084/21b4d/04.png 1280w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>원본 오리진으로 앞서 만든 s3 버킷을 선택해주고, 새 OAI를 생성한다.</p>\n<p>OAI는 Origin Access Identity의 약자로, CloudFront에서 OAI를 사용하여 버킷의 파일을 액세스해 사용자에게 제공할 수 있도록 S3 버킷 권한을 구성할 수 있다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2e782b0874a5fa0aed13dc26eb8f43d4/00b70/05.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.86486486486487%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLUlEQVQ4y52UiW7bMBBE9f8fV6Rp6iNOXF86qJuieJOagvRRO7GDIgQeJFHQYJazq+R5tsBsPsePp5+gjIEOw7fphgFJ1fYoyxKcCwjxfaSUGEaOpO4pqqaBB2Ccg/X+hrB3F2thjLlgrQWXEgmlDGS7wVCV8JzDsgFuZLDsCKTAJAL8FqMxTVPETxPCktogodsdmvc3FKsVqvU7ytM9eVshXy7RbbcwdQXXNrBNA9e10IRA7TZR5CwaljIWCS0rdNs/aHcbkPUafZZBkhw8UGQQpIgivu/g+xaednBtHfksaJB0jOOQZsiLAmlRou4HjCPHwBjYOMJ7f5+jxmdBOgpIpeIhA+Glh3Mezv/jo9h5765gSxmapomOejrEtB66uuIs8klwEDIKhpLLqkZV1SirKkLKEiPncKGd7vCgZA5S5MhJiW6UUEpDax17S2kdHT9a1y4vgj1X2OwzLJevWJxYvq4wXyzx8nuGLM/jFJydPOJKUINyCcE5OOfxYylkHCclZUw8jCVOH321oqA0Fk1TY7PdoespRBDhAlyIy/kFB+F6bJfjZHhr4QYKQ3s42gPeHxubKwPGGNIsxyFNY4n7Q3p6zi4BFeQYUBC10wRZVWCLGQ6/XtA/P8URVc4jEdqAUoqm7aKL0I8xRetiICGgjz0XCY7DnCsFLzgwnRxKbcFGHl3lBcF+f4jO0tP0hNLdVYvcTfvmDLVBPepYUlEUIITc/JKuW+R/Uv4Ll8ZyyT9P2jEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"05\" title=\"05\" src=\"/static/2e782b0874a5fa0aed13dc26eb8f43d4/fcda8/05.png\" srcset=\"/static/2e782b0874a5fa0aed13dc26eb8f43d4/12f09/05.png 148w,\n/static/2e782b0874a5fa0aed13dc26eb8f43d4/e4a3f/05.png 295w,\n/static/2e782b0874a5fa0aed13dc26eb8f43d4/fcda8/05.png 590w,\n/static/2e782b0874a5fa0aed13dc26eb8f43d4/00b70/05.png 733w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>그러면 현재 cloudfront에 연결된 s3 버킷에 자동으로 버킷 정책이 추가된다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/96c1b30e4f225b7431dbbc3687df9b1a/d8817/06.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 39.189189189189186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCklEQVQoz5WR627DIAyFef9H3I+1S3NpCrRcDMEEeqawbuqmSNWO9MlGgmNji3EYoKREWhYEIsQQEEJAjPGRE8h7GB9gaEFmRub0BGOJEcYYWGshFCV0lyu6aUY/K3RnidNP1Bi1xS1m6MDQlOBSBuUC4ge5wPMXxCvE6BLeJo33cUYnbzhMCsdZ4zBJHKXBxzVg8hmDTRi0w2wDDFeYVGBSxW2LXKHj2oqK7VtKKRhjEWLEuha80v1+/8UmZkYIESIxo+/7NrdSSuP5cq0Vdcfgb4FviVIrzvOMy0XCOgfnPIioFSAK8N43tiXtdbd5PZ8F59yMpFRtUzEuO4/2O9sbgch5fTmj//AJCQ5vkyDfRwMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"06\" title=\"06\" src=\"/static/96c1b30e4f225b7431dbbc3687df9b1a/fcda8/06.png\" srcset=\"/static/96c1b30e4f225b7431dbbc3687df9b1a/12f09/06.png 148w,\n/static/96c1b30e4f225b7431dbbc3687df9b1a/e4a3f/06.png 295w,\n/static/96c1b30e4f225b7431dbbc3687df9b1a/fcda8/06.png 590w,\n/static/96c1b30e4f225b7431dbbc3687df9b1a/efc66/06.png 885w,\n/static/96c1b30e4f225b7431dbbc3687df9b1a/c83ae/06.png 1180w,\n/static/96c1b30e4f225b7431dbbc3687df9b1a/d8817/06.png 1238w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>자동 객체 압축은 Yes로, 뷰어 프로토콜 정책은 Redirect HTTP to HTTPS로 설정해 준다. (cloudfront에서 제공하는 기본 보안 정책이다.)</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f594d737fcd00b6f457d6ad704506863/f8067/07.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKklEQVQ4y6WTe2+CMBTF+f4fb0umU7L5wkJbSsEqRaC/ReIy42Nj20lO+t953Hsb2bJksVgym82RUnJsW7z3+Kb5E6Odc1hrMbbC+4au6/7F6FDXSKUoXM0nQjgx/Mh7iA5KoicvmHjObr2mzXNC348SvMeo2iZsNxtK56h8S1sY8DUBRqW7EbRCYBIB9QGaBqwhdN1X9we4FL40iGyWIZ+fQKaQpYRcE47Hu+6jZrgXCfn7G6s4RicJuB0YPVT+LuEjRGWakqSKRCqEzrFVRZurmyqjBZ3YouKYzesrlRDUYkt7qn9VeaxBZE3BYjpjNZ3gZDZsmPMMr5cwKuHu4EmUYblekymNKUv6EM6X3w/vrxJ6X7N3bvjHAzOJMQW5MRhj0FoPomMFPwBlI/pbSBFMvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"07\" title=\"07\" src=\"/static/f594d737fcd00b6f457d6ad704506863/fcda8/07.png\" srcset=\"/static/f594d737fcd00b6f457d6ad704506863/12f09/07.png 148w,\n/static/f594d737fcd00b6f457d6ad704506863/e4a3f/07.png 295w,\n/static/f594d737fcd00b6f457d6ad704506863/fcda8/07.png 590w,\n/static/f594d737fcd00b6f457d6ad704506863/f8067/07.png 726w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"5-캐시-정책-설정\" style=\"position:relative;\"><a href=\"#5-%EC%BA%90%EC%8B%9C-%EC%A0%95%EC%B1%85-%EC%84%A4%EC%A0%95\" aria-label=\"5 캐시 정책 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 캐시 정책 설정</h3>\n<p>cloudfront는 aws에서 제공하는 CDN으로, 오리진 서버까지 가지 않고 리소스를 가져오는 캐시 기능을 사용할 수 있다. 기본으로 제공되는 CachingOptimized를 선택해주었다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/8ab4a1c7620f1e9fe3dad52e6f350d1b/19ab6/08.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 47.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJ0lEQVQoz42S21LDMAxE+/+/SAuDQ5o2kIvl+y3LyJkGGvKAZvYhHmt1tM5JKQUhGlxe3/ByvmAcJ4QQYJ2DNhbGWmht4H0A17Is+F38/Thz3uOkXQAZB61UbZREICJIKaumeYZSGqWU/xmS9WiuNwgh8C4Euq6DYTJjqtjcOffUfKTNMKVUm5iEKXIpiCkhxLhRHZHtKTfDGCMmKdF8tGivHWYpoZlMqZpjShk8NOcCHz16umNUI0KImCWB+x+1EsaIL3I4dyOazxnXycDlH5qyLFVMkXKC8gTjDXLOf7bYVh6GEW3b4nbv0d3u68saW1/7KKujPJ8MpbZo+wGTpHpo7PrL+BBqpkyzqeQ6iO9JSXX1HWGEDhm9Coh5OQz8SBwDD9gTfgM/RL8kxki9OAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"08\" title=\"08\" src=\"/static/8ab4a1c7620f1e9fe3dad52e6f350d1b/fcda8/08.png\" srcset=\"/static/8ab4a1c7620f1e9fe3dad52e6f350d1b/12f09/08.png 148w,\n/static/8ab4a1c7620f1e9fe3dad52e6f350d1b/e4a3f/08.png 295w,\n/static/8ab4a1c7620f1e9fe3dad52e6f350d1b/fcda8/08.png 590w,\n/static/8ab4a1c7620f1e9fe3dad52e6f350d1b/efc66/08.png 885w,\n/static/8ab4a1c7620f1e9fe3dad52e6f350d1b/c83ae/08.png 1180w,\n/static/8ab4a1c7620f1e9fe3dad52e6f350d1b/19ab6/08.png 1664w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>이렇게 하면 cloudfront 기본 설정은 끝난다. [확인] 버튼을 눌러준다.</p>\n<h3 id=\"6-기본-객체-루트-및-오류-페이지-응답-편집\" style=\"position:relative;\"><a href=\"#6-%EA%B8%B0%EB%B3%B8-%EA%B0%9D%EC%B2%B4-%EB%A3%A8%ED%8A%B8-%EB%B0%8F-%EC%98%A4%EB%A5%98-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%9D%91%EB%8B%B5-%ED%8E%B8%EC%A7%91\" aria-label=\"6 기본 객체 루트 및 오류 페이지 응답 편집 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 기본 객체 루트 및 오류 페이지 응답 편집</h3>\n<p>cloudfront 대시보드의 일반 → 설정 → 편집에서 기본값 루트 객체를 리액트 앱의 진입점인 <code class=\"language-text\">index.html</code>로 설정해 준다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/68c8a1efbe19e7f5c3703cfe0153e56d/7db30/09.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 21.62162162162162%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeklEQVQY021N0Q4DIQi7///Q7WUXvSkognTR5bLbZpOmpNCyHccTrTWo2dQrmQtE5M+vIt++KiQn0P2GLcQIIpqL7o4T7j4P/eKdGIWqhhW2ECIe+w5mXoZXKKWAS1kXZiLUWqGqMLP5Wafqm2YfqqL3jpQyRm7Mvzcv+1865bq8NAQAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"09\" title=\"09\" src=\"/static/68c8a1efbe19e7f5c3703cfe0153e56d/fcda8/09.png\" srcset=\"/static/68c8a1efbe19e7f5c3703cfe0153e56d/12f09/09.png 148w,\n/static/68c8a1efbe19e7f5c3703cfe0153e56d/e4a3f/09.png 295w,\n/static/68c8a1efbe19e7f5c3703cfe0153e56d/fcda8/09.png 590w,\n/static/68c8a1efbe19e7f5c3703cfe0153e56d/efc66/09.png 885w,\n/static/68c8a1efbe19e7f5c3703cfe0153e56d/c83ae/09.png 1180w,\n/static/68c8a1efbe19e7f5c3703cfe0153e56d/7db30/09.png 1494w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4db41245ed50e6c0d298c0334f384226/8cdda/09-1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 17.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAiUlEQVQY06XM2QrCMBCF4bz/M7qg1NRk0gVLbdosv6Qq1IteOfBx4MwwSsRhjKHve6wVRIR/Run6TqVrbrqm0prz5YprWqw4mrZDXLNquw5jhccwkHIm71CH44nydAmBeVnw88zkPc9p+uTbtyv7chtCWHOrdGocR7z3pJR+5bzbxSJGYkwbce1fbFY3zGVxd+EAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"09 1\" title=\"09 1\" src=\"/static/4db41245ed50e6c0d298c0334f384226/fcda8/09-1.png\" srcset=\"/static/4db41245ed50e6c0d298c0334f384226/12f09/09-1.png 148w,\n/static/4db41245ed50e6c0d298c0334f384226/e4a3f/09-1.png 295w,\n/static/4db41245ed50e6c0d298c0334f384226/fcda8/09-1.png 590w,\n/static/4db41245ed50e6c0d298c0334f384226/efc66/09-1.png 885w,\n/static/4db41245ed50e6c0d298c0334f384226/8cdda/09-1.png 1168w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>마지막으로 cloudfront 대시보드의 [오류 페이지] 탭에서 오류 시 돌아갈 응답 페이지를 입력해준다. (react로 SPA 개발 시 router를 사용한다면 체크해줘야 할 부분이다.)</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/1b06a0962ffd4a126bcf7c58dae74741/6a5c3/10.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 73.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABcElEQVQ4y42UjXKDIBCEff9nbKtJbTWx/oCIiJDt3BksJiYNMysq8Ll3HCZt16EoSrRCYhwN9DjeaXxRg9ZImqZFmmYoawE7O8zWYp7njay1L8kYg4SoUvaQUi4DARLJOYfL5cLy135PNC/phMDbR4r8u4DsFWTfr72QJInRGHjveYHznj9ipgm3jYHksGlbCCEwWbu48J5F99Tidwy+wsNYmMdAcnA6V6ibBuS2V4u7TlAKZg4xhq2KPrYBkkOt9ZovH+UqOHmkfYdCIMsOyA5HnKuKt77vFTslh/GiW+0CO6VRN92SM2BTLvTuWYuhK7BVI5Qeuf72AGHyM+gG6J1DeTrh+JnjXP1ADQOXC4Uc199/WoF0UWrg/NExCzU2TRbzkw0Jm3IXMuWK6jDPv1ZXlo+fe3jEJu6XPN+H7D2K8oT3NONwQx0Og0avlmfqKYq/cYW6aTmiOMfESsIfhQAU6ipjts83ouNITuO5xPkFrASXFCnyuvcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"10\" title=\"10\" src=\"/static/1b06a0962ffd4a126bcf7c58dae74741/fcda8/10.png\" srcset=\"/static/1b06a0962ffd4a126bcf7c58dae74741/12f09/10.png 148w,\n/static/1b06a0962ffd4a126bcf7c58dae74741/e4a3f/10.png 295w,\n/static/1b06a0962ffd4a126bcf7c58dae74741/fcda8/10.png 590w,\n/static/1b06a0962ffd4a126bcf7c58dae74741/efc66/10.png 885w,\n/static/1b06a0962ffd4a126bcf7c58dae74741/c83ae/10.png 1180w,\n/static/1b06a0962ffd4a126bcf7c58dae74741/6a5c3/10.png 1646w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"7-확인\" style=\"position:relative;\"><a href=\"#7-%ED%99%95%EC%9D%B8\" aria-label=\"7 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 확인!</h3>\n<p>이제 cloudfront 도메인을 통해 사이트를 확인할 수 있다 👾</p>","timeToRead":3,"frontmatter":{"title":"React App s3 & Cloudfront로 배포하기","date":"August 28, 2021","description":null,"tags":["aws","frontend","main"],"disqus":null},"fields":{"langKey":"en"}}},"pageContext":{"slug":"/frontend/s3-cloudfront/","previous":{"fields":{"slug":"/frontend/fe-performance-basecamp/","langKey":"en","directoryName":"frontend"},"frontmatter":{"date":"August 28, 2021","description":null,"title":"프론트엔드 성능 베이스캠프","tags":["frontend"]}},"next":{"fields":{"slug":"/wtc/wtc-week-29/","langKey":"en","directoryName":"wtc"},"frontmatter":{"date":"August 28, 2021","description":null,"title":"우테코 29주차 기록","tags":["woowacourse"]}},"previousInSameTag":{"fields":{"slug":"/frontend/fe-performance-basecamp/","langKey":"en","directoryName":"frontend"},"frontmatter":{"date":"August 28, 2021","description":null,"title":"프론트엔드 성능 베이스캠프","tags":["frontend"]}},"nextInSameTag":{"fields":{"slug":"/frontend/fe-performance-measurement/","langKey":"en","directoryName":"frontend"},"frontmatter":{"date":"August 14, 2021","description":null,"title":"프론트엔드 성능 분석 & 기본 성능 개선","tags":["frontend"]}},"translationsLink":[]}},"staticQueryHashes":["1522010811","2466007692","2894998521","3765107650","683610688"]}