{"componentChunkName":"component---src-templates-blog-post-js","path":"/frontend/ssr-without-next/","result":{"data":{"site":{"siteMetadata":{"title":"ziglog","author":"zigsong","lang":"en"}},"markdownRemark":{"id":"9b1adb17-5fa4-5a35-8092-cea15475d4ff","excerpt":"SSR | express | hydration ì„¸ìƒì— ì–´ë–¤ ì‚¬ëŒë“¤ì´ Next.jsë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë¦¬ì•¡íŠ¸ ì•±ì„ SSRë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í• ê¹Œ ì‹¶ì§€ë§Œâ€¦ ìš°ë¦¬ëŠ” í•´ë‚¸ë‹¤! ğŸ­ í˜ì–´ ë¯¸í‚¤ì˜ ê¸€ì—ë„ ë¹„ìŠ·í•œ ë‚´ìš©ì´ ì •ë¦¬ë˜ì–´ ìˆë‹¤. webpack.server.jsâ€¦","html":"<p>SSR | express | hydration</p>\n<!-- more -->\n<p>ì„¸ìƒì— ì–´ë–¤ ì‚¬ëŒë“¤ì´ Next.jsë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë¦¬ì•¡íŠ¸ ì•±ì„ SSRë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í• ê¹Œ ì‹¶ì§€ë§Œâ€¦ ìš°ë¦¬ëŠ” í•´ë‚¸ë‹¤!</p>\n<p>ğŸ­ <a href=\"https://tecoble.techcourse.co.kr/post/2021-09-10-ssr/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">í˜ì–´ ë¯¸í‚¤ì˜ ê¸€</a>ì—ë„ ë¹„ìŠ·í•œ ë‚´ìš©ì´ ì •ë¦¬ë˜ì–´ ìˆë‹¤.</p>\n<hr>\n<h2 id=\"webpackserverjs-ì„¸íŒ…\" style=\"position:relative;\"><a href=\"#webpackserverjs-%EC%84%B8%ED%8C%85\" aria-label=\"webpackserverjs ì„¸íŒ… permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>webpack.server.js ì„¸íŒ…</h2>\n<p><code class=\"language-text\">module</code>ê³¼ ê°™ì€ ê¸°ë³¸ì ì¸ ì„¸íŒ…ì€ ê¸°ì¡´ì˜ í´ë¼ì´ì–¸íŠ¸ webpack ì„¤ì •ê³¼ ë¹„ìŠ·í•˜ê²Œ ì‘ì„±í•´ì£¼ì—ˆë‹¤. serverìš© webpack ì„¤ì •ì—ì„œ ëˆˆì—¬ê²¨ë³¼ ë¶€ë¶„ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// webpack.server.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> nodeExternals <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-node-externals'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1ï¸âƒ£</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">'./server/index.tsx'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 2ï¸âƒ£</span>\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'dist-server'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 3ï¸âƒ£</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].js'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">publicPath</span><span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">clean</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">'node'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 4ï¸âƒ£</span>\n  <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'development'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">extensions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'.tsx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.js'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'node_modules'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">externals</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">nodeExternals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 1ï¸âƒ£</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>1ï¸âƒ£ <strong>webpack-node-externals</strong> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ node_modules íŒ¨í‚¤ì§€ë“¤ì„ ë²ˆë“¤ì—ì„œ ì œì™¸(<code class=\"language-text\">import</code>-<code class=\"language-text\">export</code>ë¡œ ì„œë¡œ ì˜ì¡´í•˜ëŠ” íŒŒì¼ë“¤ì„ ë²ˆë“¤ íŒŒì¼ì— ëª¨ë‘ ë„£ëŠ” ê²ƒì„ ë°©ì§€)í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. ì„œë²„ì˜ ì‹¤í–‰ í™˜ê²½ì´ ë  nodeëŠ” node_modulesì˜ íŒ¨í‚¤ì§€ë“¤ì„ ì´ë¯¸ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ë¹Œë“œ ê³¼ì •ì—ì„œ ì œì™¸ì‹œì¼œ, ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•í•˜ê³  ë¶ˆí•„ìš”í•œ ëª¨ë“ˆë“¤ì˜ ì˜ì¡´ì„±ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.</li>\n<li>2ï¸âƒ£ webpack ë²ˆë“¤ë§ì˜ ì‹œì‘ì ì„ server íŒŒì¼ë¡œ ì¡ì•„ì¤€ë‹¤.</li>\n<li>3ï¸âƒ£ server ë²ˆë“¤ë§ ê²°ê³¼ë¬¼ì„ <code class=\"language-text\">dist-server</code>ë¼ëŠ” ë””ë ‰í† ë¦¬ì— ë„£ì–´ì¤€ë‹¤.</li>\n<li>4ï¸âƒ£ server ë²ˆë“¤ë§ íŒŒì¼ì´ ì‹¤í–‰ë˜ëŠ” í™˜ê²½ì€ webì´ ì•„ë‹Œ nodeì´ë¯€ë¡œ <code class=\"language-text\">target</code>ì— ì‘ì„±í•´ì¤€ë‹¤.</li>\n</ul>\n<hr>\n<h2 id=\"server-íŒŒì¼-ì‘ì„±\" style=\"position:relative;\"><a href=\"#server-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1\" aria-label=\"server íŒŒì¼ ì‘ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>server íŒŒì¼ ì‘ì„±</h2>\n<p>node ì„œë²„ ì‹¤í–‰ì„ ìœ„í•´ express í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— expressë¥¼ ì„¤ì¹˜í•´ ì¤€ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ yarn add express\n$ yarn add -D @types/express</code></pre></div>\n<p>ê¸°ë³¸ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í–ˆë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// server/index.tsx</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOMServer <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/server\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StaticRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ServerStyleSheet<span class=\"token punctuation\">,</span> StyleSheetManager <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"styled-components\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> express <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> path <span class=\"token keyword\">from</span> <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> fs <span class=\"token keyword\">from</span> <span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"../src/App\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span> <span class=\"token operator\">||</span> <span class=\"token number\">9000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1ï¸âƒ£</span>\n<span class=\"token keyword\">const</span> sheet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerStyleSheet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2ï¸âƒ£</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3ï¸âƒ£</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">static</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 4ï¸âƒ£</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 5ï¸âƒ£</span>\n  <span class=\"token keyword\">const</span> reactApp <span class=\"token operator\">=</span> ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// 6ï¸âƒ£</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StyleSheetManager</span></span> <span class=\"token attr-name\">sheet</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sheet<span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StaticRouter</span></span> <span class=\"token attr-name\">location</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StaticRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StyleSheetManager</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> styleTags <span class=\"token operator\">=</span> sheet<span class=\"token punctuation\">.</span><span class=\"token function\">getStyleTags</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2ï¸âƒ£</span>\n\n  <span class=\"token keyword\">const</span> indexFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../dist/index.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 7ï¸âƒ£</span>\n\n  fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span>indexFile<span class=\"token punctuation\">,</span> <span class=\"token string\">\"utf8\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 8ï¸âƒ£</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Node.js ì„œë²„ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì„œë²„ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ğŸ”«\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> data\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;div id=\"root\">&lt;/div>'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;div id=\"root\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>reactApp<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 9ï¸âƒ£</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;head>(.+)&lt;\\/head></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">s</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;head>$1 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styleTags<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/head></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2ï¸âƒ£</span>\n\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ğŸ”Ÿ</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Server is listening on port </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìˆ«ì ì´ëª¨ì§€ê°€ ğŸ”Ÿê¹Œì§€ë°–ì— ì—†ì–´ì„œ, ìµœëŒ€í•œ ë¶„ë¦¬í•´ë³´ì•˜ë‹¤ ğŸ˜¬</p>\n<ul>\n<li>1ï¸âƒ£ express ì•±ì„ ìƒì„±í•œë‹¤.</li>\n<li>2ï¸âƒ£ í´ë¼ì´ì–¸íŠ¸ì˜ ë¦¬ì•¡íŠ¸ ì•±ì—ì„œ styled-componentsë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, ë¯¸ë¦¬ ìŠ¤íƒ€ì¼ë§ ì½”ë“œë¥¼ ë°›ì•„ì„œ ì„œë²„ì—ì„œ ë‚´ë ¤ì£¼ê¸° ìœ„í•œ ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•  <code class=\"language-text\">&lt;head></code> íƒœê·¸ ì•ˆì— ì‹¬ì–´ì„œ ë³´ë‚´ì¤€ë‹¤.</li>\n<li>3ï¸âƒ£ express ì„œë²„ì—ì„œ jsonìœ¼ë¡œ ì´ë£¨ì–´ì§„ request bodyë¥¼ ë°›ì•˜ì„ ê²½ìš° ì´ë¥¼ í•´ì„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë‹¤. express v4 ì´ì „ê¹Œì§€ëŠ” <code class=\"language-text\">body-parser</code>ë¼ëŠ” ë³„ë„ì˜ ëª¨ë“ˆì„ ì„¤ì¹˜í•´ ì‚¬ìš©í–ˆë‹¤.</li>\n<li>4ï¸âƒ£ ì´ë¯¸ì§€, CSS íŒŒì¼ ë° JavaScript íŒŒì¼ê³¼ ê°™ì€ ì •ì  íŒŒì¼ì„ ì œê³µí•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” expressì˜ ê¸°ë³¸ ì œê³µ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ì´ë‹¤. webpack ë¹Œë“œ ì‹œ ìƒì„±ë˜ëŠ” íŒŒì¼ë“¤ì„ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.</li>\n<li>5ï¸âƒ£ root url(<code class=\"language-text\">/</code>)ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.</li>\n<li>6ï¸âƒ£ <code class=\"language-text\">ReactDOMServer</code>ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì  ë§ˆí¬ì—…ìœ¼ë¡œ ë Œë”ë§í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê°ì²´ë¡œ, ì£¼ë¡œ Node ì„œë²„ì—ì„œ ì‚¬ìš©í•œë‹¤. <code class=\"language-text\">renderToString</code>ëŠ” ë¦¬ì•¡íŠ¸ì—ì„œ ì§€ì›í•˜ëŠ” ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ ë©”ì„œë“œë¡œ, ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ì˜ ì´ˆê¸° HTMLì„ ë Œë”ë§í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ ë¦¬ì•¡íŠ¸ ì½”ë“œì˜ <code class=\"language-text\">hydrate</code>ì™€ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.</li>\n<li>7ï¸âƒ£ ë²ˆë“¤ íŒŒì¼ì´ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬ì˜ html íŒŒì¼ì„ ê°€ì ¸ì˜¨ë‹¤.</li>\n<li>8ï¸âƒ£ nodeì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” file system ëª¨ë“ˆë¡œ, íŒŒì¼ì„ ì½ê³  ì“¸ ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤. ì—¬ê¸°ì„œëŠ” ë²ˆë“¤ ê²°ê³¼ì˜ html íŒŒì¼ì„ ì½ì–´ í´ë¼ì´ì–¸íŠ¸ì— ë‚´ë ¤ì£¼ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</li>\n<li>9ï¸âƒ£ ë²ˆë“¤ ê²°ê³¼ì˜ html íŒŒì¼ì„ ê°€ì ¸ì™”ë‹¤ë©´, ë¦¬ì•¡íŠ¸ ì•±ì´ ì‹œì‘ë˜ëŠ” <code class=\"language-text\">&lt;div id=\"root\"></code>ì— ì•„ê¹Œ <code class=\"language-text\">renderToString</code>ìœ¼ë¡œ ë§ˆí¬ì—…í•œ ê¸°ë³¸ HTML íŒŒì¼ì„ ì‹¬ì–´ì¤€ë‹¤.</li>\n<li>ğŸ”Ÿ express ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¸ í´ë¼ì´ì–¸íŠ¸ì— ì§€ê¸ˆê¹Œì§€ ìƒì„±í•œ ì‘ë‹µì„ ë°˜í™˜í•œë‹¤.</li>\n</ul>\n<blockquote>\n<p><strong>ğŸ‘¾ path.join vs path.resolve</strong></p>\n<p><strong>path.join</strong>ì€ ë‚˜ì—´ëœ ì¸ìë“¤ì„ ìˆœì„œëŒ€ë¡œ ì—°ê²°í•´ì£¼ê¸°ë§Œ í•œë‹¤.</p>\n<p>ë°˜ë©´ <strong>path.resolve</strong>ëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì ˆëŒ€ê²½ë¡œì˜ URLì„ ë°˜í™˜í•œë‹¤. ì „ë‹¬ ë°›ì€ ì¸ìë“¤ì˜ ì˜¤ë¥¸ìª½ë¶€í„° ì™¼ìª½ìœ¼ë¡œ ì¸ìë¥¼ í•©ì³ë‚˜ê°€ë©°, ì´ ê³¼ì •ì—ì„œ â€˜/â€˜ë¥¼ ë§Œë‚˜ë©´ ì ˆëŒ€ê²½ë¡œë¡œ ì¸ì‹í•´ì„œ ë‚˜ë¨¸ì§€ ì¸ìë“¤ì„ ë¬´ì‹œí•œë‹¤.\në§Œì•½ â€˜/â€˜ë¥¼ ëê¹Œì§€ ë§Œë‚˜ì§€ ëª»í•œë‹¤ë©´ â€˜/í˜„ì¬ê²½ë¡œ/ìƒì„±ëœê²½ë¡œâ€™ í˜•íƒœë¡œ ê²°ê³¼ë¥¼ ë¦¬í„´í•œë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">path.join('/a', '/b'); // 'a/b'\npath.resolve('/a', '/b'); // '/b'</code></pre></div>\n</blockquote>\n<hr>\n<h2 id=\"react-hydration\" style=\"position:relative;\"><a href=\"#react-hydration\" aria-label=\"react hydration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React hydration</h2>\n<p>ìœ„ì™€ ê°™ì´ ì„œë²„ë¥¼ êµ¬ì„±í–ˆë‹¤ë©´, ê¸°ì¡´ ë¦¬ì•¡íŠ¸ ë Œë”ë§ ì½”ë“œë„ ì¡°ê¸ˆ ìˆ˜ì •í•´ì¤˜ì•¼ í•œë‹¤. SSRì„ ì ìš©í•œ ë¦¬ì•¡íŠ¸ ì•±ì€ hydrationì„ ìˆ˜í–‰í•œë‹¤. hydrationì€ ì§ì—­í•˜ë©´ ìˆ˜ë¶„í™”, ì¦‰ ìˆ˜ë¶„ì„ ë³´ì¶©í•˜ëŠ” í–‰ìœ„ë‹¤.</p>\n<p>ì§€ê¸ˆê¹Œì§€ëŠ” ì•„ë˜ ì½”ë“œë¥¼ í†µí•´ ë¸Œë¼ìš°ì € DOMì— ë¦¬ì•¡íŠ¸ ì½”ë“œë¥¼ ì‚½ì…í–ˆë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì»¨í…Œì´ë„ˆ DOMì— ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë Œë”ë§í•´ì¤€ë‹¤. ì»¨í…Œì´ë„ˆì˜ ìì‹ìœ¼ë¡œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë„£ì–´ì£¼ëŠ”ë°, ê¸°ì¡´ì— ì´ë¯¸ ë Œë”ë§ëœ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ë©´ ìƒˆë¡œ ë Œë”ë§í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—…ë°ì´íŠ¸ë§Œ í•´ì¤€ë‹¤. ê·¸ë¦¬ê³  ë Œë”ë§ì´ ì™„ë£Œë˜ë©´ ì„¸ ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬ëœ ì½œë°±ì„ ì‹¤í–‰í•œë‹¤.</p>\n<p>SSRì„ ì‚¬ìš©í•  ë•ŒëŠ” <code class=\"language-text\">ReactDOM.hydrate</code> ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤. hydrateëŠ” ë Œë”ë§ì€ í•˜ì§€ ì•Šê³  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë§Œ ë¶™ì—¬ì¤€ë‹¤. ì„œë²„ì—ì„œ ì´ë¯¸ ë§ˆí¬ì—…ëœ ê²°ê³¼ë¬¼ì„ ê°€ì ¸ì˜¤ë¯€ë¡œ ëª¨ë“  ê±¸ ë‹¤ì‹œ renderí•´ì¤„ í•„ìš”ê°€ ì—†ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">hydrate</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì„œë²„ëŠ” dehydrationì„ í†µí•´ ë™ì ì¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ì™„ì„±ëœ HTMLì„ ë³´ë‚´ì¤€ë‹¤. í´ë¼ì´ì–¸íŠ¸(ë¦¬ì•¡íŠ¸ ì•±)ëŠ” ì„œë²„ë¡œë¶€í„° ë°›ì€ ì •ì ì¸ HTMLì„ ë™ì ì¸ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ë¡œ ë³€í™˜í•˜ëŠ”ë°, ì´ê²ƒì„ (re)hydrateë¼ê³  í•œë‹¤. hydrateì´ ì™„ë£Œëœ ì´í›„ë¶€í„°ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ì•¡íŠ¸ê°€ ê´€ë¦¬í•˜ê²Œ ëœë‹¤.</p>\n<p>ì´ë ‡ê²Œ ì²« í˜ì´ì§€ì— ëŒ€í•œ SSRì„ ìš°ì„ ì ìœ¼ë¡œ ì™„ë£Œí–ˆë‹¤! <code class=\"language-text\">node</code> ëª…ë ¹ì–´ë¡œ ì•± ì‹¤í–‰ í›„ ë¸Œë¼ìš°ì €ë¥¼ ì—´ì–´ í™•ì¸í•´ë³´ì.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ node ./dist-server/main.js</code></pre></div>\n<p>ê°œë°œì ë„êµ¬ì˜ ë„¤íŠ¸ì›Œí¬ íƒ­ì„ ì—´ì–´ë³´ë©´, ì„œë²„ì—ì„œ ë§Œë“  ì‘ë‹µì—ì„œë¶€í„° ì´ë¯¸ ëª¨ë“  HTML ìš”ì†Œë“¤ì´ ë§ˆí¬ì—…ë˜ì–´ ë‚´ë ¤ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. (ì™œ Happy Chuseokì´ ëœ¨ëŠ”ì§€ëŠ”â€¦)</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/959756999c6a0765f256e32e39777ef1/bb051/01.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 89.86486486486487%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEO0lEQVQ4yzWQ7VMTVxSH99+oSrRJdrO72WQ3m93N7iYhAQHfOk77ud/6p/Rl6mhRi2PVogiCiCKiCCKoWBQGx4JTxaq14wudah0p31qHkNCnk2v74Zlzzr3n/s75Xclzcjiuj+OFuF5Atl6L6OE4Hls+jBKJREibNo4bYKQsUikL3TDJWTamU8LMBmSzLmnLQSp7vmhSkzYJVRd5XdxxXEp5Dz9fFoPMjINlu+jJtBBPpzNCVEloqFpSYGVDpHyxTC4o4OXeb1en2NhEqdyCHzZSv6/XdVEvFwqsjEPG9nBzoaA+SNUMISq5ubx4XCxtJSyU8IMi+UKZQrEJO+uRNExS6QymlRVCpuVgpEzhJG1mxbb1XNNTaHoaqZizyQVF/LBIJusJS0pCR0kkUdSkmJzQDMxMliDfSJAv4fl50ZdQk4J6T12wHiUrmyUuayQUXXy2LCeIx2TkuEI6bZFQNGLRuDg3TRtdN1BklXhcEf2aZhCLK8RiinAjReyAzVGFqKIQUU0iiTQblRQblBQNmiXYpJqirsc6H8gGG2SDBi1DREnSsDnKpi0xIlEZSVOTyDEZVVaQ65MVHUPRcBMaGUVFa4igbNwocjuhkVX/R8dSElhxGSsWw4rFsaJRpM+27+TTHdv4pBDyUc5ht+/ycUolMC1KQUhomQTpFCXXo+TlCG1bkM/Y+KkUrqriGgaurmMnDaRduRS7m5vYFgbkNIWcnqBJU5ju/JYXF3sYO/gVI+2fc/vIXp71H2ZlpJvlC52snD/K8kgPb8dOs9y3n7/OdTB56Gskz9EICo34+SKeH2L7AX5S596p76jOjvLs/Ake9x/j+cAxXg0epXr9LNWrvdRGu1ib7KcyeYbK4CEYPsxc536koq+ztaWNltY2isVGXD8gpya4e/wgzE/CrUtw+yxMD7A+NUhlvIfKWDdrl09QOXOAtf52VvvboW8PM0f3IvluCsf1cF0PI5lkSzSKHYty7+QhuDvO2tQwlR+Os3a7h9rMGLWpc0J4/cYA1d59rA8cpDpwAAb2Mff9N0jlxkaaW9po3bZDbKqnUkJwoasDlp7wbulXVn9/SWX5DbWVP6j++Zrq21fvWXkjYmXpKUycYu7IHqS21lbKzVtpbmnFMAxiskI2HmXhZAc8vcfq4wUqj+epPllg9ZefBLUnC9Qe3qH2YJba/Rkq81Mwcoy5umXDyeEHIUFYIAjzZByXrBxjvvMAzFykOnGa9Yk+/rnSzd+jPbwb72N9rIvaYAe1M+3UevdQ7foCTn3J7JG9SMmgyPYdu4Tl7Tt34QV57HiU+Wvj8PoZtYWbMDcGt4ZhagAme2G8G66c/I9u1m4OwW+PmJ24gpT2AvKFRrFhoVjG9nw8Reby0BAvXi7x8/37LN69w+L0DR5cG+PB1UssXr3I4uQoi9PXefjjXR4tPuT5i5cMD13gX9+NEgPi9g1QAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"01\" title=\"01\" src=\"/static/959756999c6a0765f256e32e39777ef1/fcda8/01.png\" srcset=\"/static/959756999c6a0765f256e32e39777ef1/12f09/01.png 148w,\n/static/959756999c6a0765f256e32e39777ef1/e4a3f/01.png 295w,\n/static/959756999c6a0765f256e32e39777ef1/fcda8/01.png 590w,\n/static/959756999c6a0765f256e32e39777ef1/efc66/01.png 885w,\n/static/959756999c6a0765f256e32e39777ef1/c83ae/01.png 1180w,\n/static/959756999c6a0765f256e32e39777ef1/bb051/01.png 1212w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<hr>\n<h2 id=\"loadable-componentsì™€-ì—°ê²°\" style=\"position:relative;\"><a href=\"#loadable-components%EC%99%80-%EC%97%B0%EA%B2%B0\" aria-label=\"loadable componentsì™€ ì—°ê²° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>loadable componentsì™€ ì—°ê²°</h2>\n<p>í˜„ì¬ ë¦¬ì•¡íŠ¸ ì•±ì—ì„œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ ìœ„í•´ <a href=\"https://loadable-components.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">loadable components</a>ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, SSRì„ ì ìš©í•  ê²½ìš° ì„œë²„ì—ì„œë„ ê´€ë ¨ëœ ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤.</p>\n<blockquote>\n<p><strong>ğŸ‘¾ SSRì—ì„œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì´ í•„ìš”í•œ ì´ìœ </strong></p>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ ì½”ë“œìŠ¤í”Œë¦¬íŒ…ëœ íŒŒì¼ë“¤ì€ main.jsë¥¼ ëª¨ë‘ ë¡œë“œí•˜ê³  ë‚˜ì„œì•¼ ë¡œë“œëœë‹¤. ì´ê²Œ ë°”ë¡œ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ìš© ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì´ í•„ìš”í•œ ì´ìœ ë‹¤. í˜„ì¬ëŠ” ì½”ë“œë¥¼ ë‚˜ëˆ„ê¸°ë§Œ í–ˆì„ ë¿ ê²°êµ­ í•˜ë‚˜ì˜ ë²ˆë“¤ê³¼ ë˜‘ê°™ì€ ë¡œë”©ì‹œê°„ì„ í•„ìš”ë¡œ í•œë‹¤. ì˜¤íˆë ¤ ì„œë²„ì— ìš”ì²­í•˜ëŠ” request íšŸìˆ˜ë§Œ ëŠ˜ë¦° ê¼´ì´ ëœë‹¤.</p>\n<p>ex) About í˜ì´ì§€ë¡œ ì´ˆê¸° ì§„ì…(í˜¹ì€ ìƒˆë¡œê³ ì¹¨)í–ˆì„ ë•Œ, SSR ì½”ë“œìŠ¤í”Œë¦¬íŒ…ì´ ì ìš©ë˜ì–´ ìˆì§€ ì•Šì•˜ë‹¤ë©´ mainì—ì„œ í•„ìš”í•œ ì½”ë“œë¥¼ ëª¨ë‘ ê°€ì ¸ì˜¨ í›„ mainì—ì„œ About í˜ì´ì§€ ì ‘ì† ì‹œ ë‹¤ì‹œ About ì²­í¬ íŒŒì¼ì— ëŒ€í•œ ìš”ì²­ì„ í•œë‹¤. ì´ëŠ” SSRì„ í™œìš©í•˜ì§€ ëª»í•˜ê³  ìˆëŠ” ì…ˆì´ë‹¤.</p>\n<p>ë”°ë¼ì„œ SSRì—ë„ ì½”ë“œìŠ¤í”Œë¦¬íŒ…ì„ ì ìš©í•˜ì—¬ ì´ˆê¸° ì§„ì… í˜ì´ì§€ì—ì„œ í•„ìš”í•œ JS íŒŒì¼ì„ <code class=\"language-text\">&lt;script></code> íƒœê·¸ì— ë„£ì–´ì„œ ë³‘ë ¬ì ìœ¼ë¡œ ë¡œë“œí•œë‹¤.</p>\n</blockquote>\n<p>ìš°ì„  babelì´ loadable componentë¥¼ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì„œë²„ìš© webpack ì„¤ì •ì— <code class=\"language-text\">@loadable/babel-plugin</code>ì„ ë„£ì–´ì¤€ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ yarn add -D @loadable/babel-plugin</code></pre></div>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// webpack.server.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(tsx|ts)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token literal-property property\">presets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token comment\">// ...</span>\n              <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token comment\">// ...</span>\n                <span class=\"token string\">'@loadable/babel-plugin'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê·¸ë¦¬ê³  loadable componentsë“¤ì„ ë²ˆë“¤ë§í•œ ê²°ê³¼ë¬¼ì„ json í˜•íƒœì˜ íŒŒì¼ë¡œ ì¶”ì¶œí•˜ê¸° ìœ„í•´ ê¸°ì¡´ webpack ì„¤ì •ì— <code class=\"language-text\">@loadable/webpack-plugin</code>ì„ ì¶”ê°€í•œë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ yarn add -D @loadable/webpack-plugin</code></pre></div>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// webpack.common.js</span>\n<span class=\"token keyword\">const</span> LoadablePlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@loadable/webpack-plugin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">LoadablePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì´ ìƒíƒœë¡œ ë¹Œë“œ(í´ë¼ì´ì–¸íŠ¸)ë¥¼ í•˜ë©´, dist í´ë” ì•ˆì— <code class=\"language-text\">loadable-stats.json</code> íŒŒì¼ì´ ìƒì„±ëœë‹¤. ë‚´ìš©ë¬¼ì€ ëŒ€ëµ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"hash\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"584b21677c2d7ccac8e5\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"publicPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"outputPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/Users/songji/Desktop/woowacourse/lv3/2021-nolto/frontend/dist\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"assetsByChunkName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"main.55573f72591fb92bbd79.js\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"About\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"About.68ffc067e6ca06e7f93c.js\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"vendor\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"vendor.8782ff7e073e2517c89c.js\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"assets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"asset\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vendor.8782ff7e073e2517c89c.js\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"size\"</span><span class=\"token operator\">:</span> <span class=\"token number\">528835</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"emitted\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"comparedForEmit\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"cached\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"info\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// ...</span>\n      <span class=\"token property\">\"chunkNames\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"vendor\"</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"chunkIdHints\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"vendor\"</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ì œ ì´ json íŒŒì¼ì„ ì„œë²„ì—ì„œ ë¶ˆëŸ¬ì™€ì„œ chunk íŒŒì¼ë¡œ ë¶„ë¦¬í•´ì¤„ ê²ƒì´ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// server/index.tsx</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ChunkExtractor <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@loadable/server'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// chunk ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” json íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¨ë‹¤.</span>\n<span class=\"token keyword\">const</span> statsFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../dist/loadable-stats.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> extractor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ChunkExtractor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> statsFile <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> extractor<span class=\"token punctuation\">.</span><span class=\"token function\">collectChunks</span><span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StyleSheetManager</span></span> <span class=\"token attr-name\">sheet</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sheet<span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StaticRouter</span></span> <span class=\"token attr-name\">location</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StaticRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StyleSheetManager</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> scriptTags <span class=\"token operator\">=</span> extractor<span class=\"token punctuation\">.</span><span class=\"token function\">getScriptTags</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> reactApp <span class=\"token operator\">=</span> ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>jsx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...</span>\n  fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span>indexFile<span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> data\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;div id=\"root\">&lt;/div>'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;div id=\"root\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>reactApp<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;head>(.+)&lt;\\/head></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">s</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;head>$1 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styleTags<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>scriptTags<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/head></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// head íƒœê·¸ì— scriptTags ì‚½ì…</span>\n\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>loadableë¡œ ë¶„ë¦¬ëœ ì²­í¬ íŒŒì¼ë“¤ì´ ëª¨ë‘ ë³‘ë ¬ì ìœ¼ë¡œ ë¡œë“œë˜ì–´ scriptsì— ë“¤ì–´ê°ˆ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ë„ë¡ ë¦¬ì•¡íŠ¸ ì§„ì…ì ì˜ ì½”ë“œë„ ìˆ˜ì •í•´ì¤€ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// src/index.tsx</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> loadableReady <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@loadable/component\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// loadableReadyë¡œ ê°ì‹¸ì¤€ë‹¤.</span>\n<span class=\"token function\">loadableReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">hydrate</span><span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>About í˜ì´ì§€ì—ì„œ ì ‘ì† ì‹œ ì•„ë˜ì™€ ê°™ì´ script íƒœê·¸ë¡œ Aboutì˜ ì²­í¬ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œë¶€í„° ë¦¬ì•¡íŠ¸ ë¼ìš°í„°ë¥¼ í†µí•´ ì ‘ì† ì‹œì—ëŠ” ì—¬ê¸°ì„œ ê°€ì ¸ì˜¤ì§€ ì•Šê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìƒˆë¡œ ìš”ì²­ì„ í†µí•´ ë°›ì•„ì˜¨ë‹¤.</p>\n<p>(ì„œë²„ ì½”ë“œ íŒŒì¼ì—ì„œ â€˜/aboutâ€™ url ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ìœ„í•´ <code class=\"language-text\">app.get</code> ì½”ë“œë„ ì¶”ê°€í•´ì¤€ ìƒíƒœë‹¤.)</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/406a31b171493310051d3847d98d85ef/0d0e4/02.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQklEQVQozz2S2Y7jRgxF9R/T3bKtpbSVVKs2y/Iiy3b3DDKPQR7z/x9xgihBPxyAFwQJXpLBn89PFue4asXNGO5GYytJUVuUdkhlkdrx/hHy4+0dkVfUjUXWhqJsSEXxPyVpVhL8/bXy13Pl97HnriU/bU1fFrxFObvdgahoUKcHxnZMzuJkhc4FKheYItuayarZtMwygnlUdP1A61vK4t9kRV5UhLtoYycq9LQwTmcuvefkDaPVHJ2hrSuyJCUtaqpSIjNB8FpPLOuLx+tr43JbKKua97jksIsY84JLP/E5Tqy+5dmP/O4dL2dYmpp7kfCoBJ+14EumBNfrjX44Mh4nhvFIURTbhG+5I/oI6aVCDAt+uuOnFXd68jl19EYztC1/jJpfg+bSua0+WJeRy+3Osj5RSpNlgryU24RxknF2Hb42TI1hbCyD8qxKcioyjpXkITOWSnCtcmZZEZxPnq4fOc1nfNvh23az/BFG7OMMUTtkbWmVQuc5dXxApikySajThDJOaESKFikmSwk+X69tb963CJFRlCWpyAgPKbt9xEe4ZxfnCDNip4X5uvI1aGZvOHeei5Xb9e+d5tUrgtPjxeW6fO+wUYr9ISLcJ9+XDsPD1jiMMqLKktkjeXvG+IHZ1DSmw7seqwxBd102u+fLjfN1wTpHkgjitCBJM+JEEMXpf0TxpnM7UHczXdvjaknjBrQ/ohpFMM03+nHG+h5tW5S2KNPRjWf68cQwzttTa+O/UcqilKFWlka5TTfKbPE/hE9cEgyKf5gAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"02\" title=\"02\" src=\"/static/406a31b171493310051d3847d98d85ef/fcda8/02.png\" srcset=\"/static/406a31b171493310051d3847d98d85ef/12f09/02.png 148w,\n/static/406a31b171493310051d3847d98d85ef/e4a3f/02.png 295w,\n/static/406a31b171493310051d3847d98d85ef/fcda8/02.png 590w,\n/static/406a31b171493310051d3847d98d85ef/efc66/02.png 885w,\n/static/406a31b171493310051d3847d98d85ef/c83ae/02.png 1180w,\n/static/406a31b171493310051d3847d98d85ef/0d0e4/02.png 1230w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<hr>\n<h2 id=\"react-18-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#react-18-%EC%84%A4%EC%B9%98\" aria-label=\"react 18 ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React 18 ì„¤ì¹˜</h2>\n<p>ì§œì”! â€¦ SSRì´ ì •ìƒì ìœ¼ë¡œ ì ìš©ëœ ì¤„ ì•Œì•˜ë”ë‹ˆ, í•œ ê°€ì§€ ê³ ë¹„ê°€ ë” ìˆì—ˆë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Error: ReactDOMServer does not yet support Suspense.</code></pre></div>\n<p>ğŸ˜‘</p>\n<p>ê·¸ë ‡ë‹¤. loadable componentsëŠ” SSRì„ ì§€ì›í•˜ì§€ë§Œ, Suspenseê¹Œì§€ëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²ƒì´ì—ˆë‹¤. ê·¸ë˜ì„œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ë„êµ¬ë¥¼ ì„ íƒí•  ë•Œ, Suspenseë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ ì¨ì•¼í•˜ëŠ” <code class=\"language-text\">React.lazy</code>ëŠ” SSRì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•œ ê²ƒ ê°™ë‹¤.</p>\n<p>react-queryê¹Œì§€ ì´ìš©í•˜ëŠ” ë§ˆë‹¹ì— Suspenseë¥¼ ê±·ì–´ë‚¼ ìˆ˜ëŠ” ì—†ì–´ì„œ, ë¶ˆê³¼ ëª‡ ë‹¬ ì „ ë°œí‘œëœ, Suspenseë¥¼ ì§€ì›í•˜ëŠ” React 18ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤!</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ yarn add react@alpha react-dom@alpha</code></pre></div>\n<p>React 18ì˜ ìµœì‹  ê¸°ëŠ¥ì— ëŒ€í•œ ë‚´ìš©ì€ <a href=\"https://zigsong.github.io/2021/10/03/react-18/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ì—¬ê¸°</a>ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<hr>\n<h2 id=\"troubleshooting\" style=\"position:relative;\"><a href=\"#troubleshooting\" aria-label=\"troubleshooting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TroubleShooting</h2>\n<h3 id=\"nodeì—ì„œëŠ”-ëª»-ì°¾ëŠ”-window-ë¶„ë¦¬í•˜ê¸°\" style=\"position:relative;\"><a href=\"#node%EC%97%90%EC%84%9C%EB%8A%94-%EB%AA%BB-%EC%B0%BE%EB%8A%94-window-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"nodeì—ì„œëŠ” ëª» ì°¾ëŠ” window ë¶„ë¦¬í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nodeì—ì„œëŠ” ëª» ì°¾ëŠ” window ë¶„ë¦¬í•˜ê¸°</h3>\n<p>(ì•„ì§ í•´ê²° ì¤‘ì¸ ë¬¸ì œ)</p>\n<p>localStorageë‚˜ window.Kakao ë“± <code class=\"language-text\">window</code> ê°ì²´ì— ì ‘ê·¼í•´ì•¼ í•˜ëŠ” ì½”ë“œê°€ ì´ê³³ì €ê³³ ì‚°ë°œë˜ì–´ ìˆì—ˆëŠ”ë°, node ì„œë²„ë¡œ ì‹¤í–‰í•œ í™˜ê²½ì—ëŠ” windowê°€ ì—†ë‹¤. ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê¸‰í•œ ëŒ€ë¡œ ë§ë„ ì•ˆ ë˜ëŠ” ì´ë¦„(windowDetector)ì˜ utilì„ ë§Œë“¤ì–´ node í™˜ê²½ì—ì„œëŠ” windowë¥¼ ì‹¤í–‰í•˜ëŠ” ì½”ë“œë¥¼ ë¬´ì‹œí•˜ê³  ë„˜ì–´ê°€ë„ë¡ í–ˆë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// windowDetector.js</span>\n<span class=\"token keyword\">const</span> hasWindow <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> hasWindow<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œëŠ” ëŒ€ëµ ì´ëŸ° ëŠë‚Œâ€¦</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">KAKAO_API_KEY</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>window<span class=\"token punctuation\">.</span>Kakao<span class=\"token punctuation\">.</span><span class=\"token function\">isInitialized</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasWindow<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>Kakao<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">KAKAO_API_KEY</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"esmodule-íƒ€ì…ì˜-íŒ¨í‚¤ì§€ë¥¼-nodeexternalsì—ì„œ-ì œì™¸í•˜ê¸°\" style=\"position:relative;\"><a href=\"#esmodule-%ED%83%80%EC%9E%85%EC%9D%98-%ED%8C%A8%ED%82%A4%EC%A7%80%EB%A5%BC-nodeexternals%EC%97%90%EC%84%9C-%EC%A0%9C%EC%99%B8%ED%95%98%EA%B8%B0\" aria-label=\"esmodule íƒ€ì…ì˜ íŒ¨í‚¤ì§€ë¥¼ nodeexternalsì—ì„œ ì œì™¸í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ESModule íƒ€ì…ì˜ íŒ¨í‚¤ì§€ë¥¼ nodeExternalsì—ì„œ ì œì™¸í•˜ê¸°</h3>\n<p>(ì•„ì§ í•´ê²° ì¤‘ì¸ ë¬¸ì œ)</p>\n<p>ì„œë²„ ë²ˆë“¤ë§ íŒŒì¼ì—ì„œ node_modulesë¥¼ ì œì™¸í•˜ê¸° ìœ„í•´ webpack-node-externalsë¥¼ ì‚¬ìš©í–ˆë‹¤. ê·¸ ê²°ê³¼ node_modulesë¡œ ì„¤ì¹˜í•œ íŒ¨í‚¤ì§€ë“¤ì€ ë²ˆë“¤ íŒŒì¼ì— ëª¨ë‘ ë“¤ì–´ê°€ì§€ ì•Šê³ , ê°œë³„ì ìœ¼ë¡œ <code class=\"language-text\">require</code> ë©”ì„œë“œë¥¼ í†µí•´ ë¶ˆëŸ¬ì˜¤ê²Œ ëœë‹¤.</p>\n<p>ê·¸ëŸ°ë°! í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤‘ react-markdownì´ <code class=\"language-text\">require</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” CommonJS í˜•íƒœì˜ ëª¨ë“ˆ ë°©ì‹ì„ ì§€ì›í•˜ì§€ ì•Šì•„ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. (í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ package.jsonì„ ë³´ë©´ <code class=\"language-text\">\"type\": \"module\"</code>ì´ë¼ê³  ì í˜€ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.)</p>\n<blockquote>\n<p>Must use import to load ES Module:</p>\n</blockquote>\n<p>ê·¸ë˜ì„œ ì´ ì¹œêµ¬ëŠ”â€¦ <code class=\"language-text\">externals</code>ì—ì„œ ì œì™¸ì‹œì¼œì¤˜ì•¼ í•œë‹¤. ë‹¤í–‰íˆ <code class=\"language-text\">allowlist</code> ì˜µì…˜ì„ í†µí•´ ì›í•˜ëŠ” ëª¨ë“ˆë§Œ ë²ˆë“¤ì— ë‹¤ì‹œ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆê²Œ í•´ì¤„ ìˆ˜ ìˆì„ ì¤„ ì•Œì•˜ëŠ”ë°, peerDependency ë¬¸ì œì¸ì§€ í•˜ë‚˜ë¥¼ í•´ê²°í•˜ë©´ ì¤„ì¤„ì´ ë‹¤ ìœ„ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ì¼ë‹¨ì€ ì–´ë””ê¹Œì§€ ê°€ë‚˜ ë³´ì, í•˜ëŠ” ì‹¬ì •ìœ¼ë¡œ ëª¨ì¡°ë¦¬ ë„£ì–´ì£¼ì—ˆë‹¤. êµ‰ì¥íˆ ëª»ìƒê¸´ ì½”ë“œê°€ íƒ„ìƒí–ˆê³ , ë‹¤ë¥¸ ë°©ë²•ì„ ê³„ì†í•´ì„œ ì°¾ì•„ë³¼ ì˜ˆì •ì´ë‹¤. ğŸ˜‘</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// webpack.server.js</span>\n<span class=\"token keyword\">const</span> nodeExternals <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-node-externals'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token literal-property property\">externals</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">nodeExternals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token literal-property property\">externals</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token function\">nodeExternals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">allowlist</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'react-markdown'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'unified'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'bail'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'is-plain-obj'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'trough'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'remark-rehype'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'mdast-util-to-hast'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'unist-util-generated'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h3 id=\"ì„œë²„ì˜-expressstaticì´-indexhtmlì„-ê°€ì ¸ê°€ë²„ë¦¬ëŠ”-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84%EC%9D%98-expressstatic%EC%9D%B4-indexhtml%EC%9D%84-%EA%B0%80%EC%A0%B8%EA%B0%80%EB%B2%84%EB%A6%AC%EB%8A%94-%EB%AC%B8%EC%A0%9C\" aria-label=\"ì„œë²„ì˜ expressstaticì´ indexhtmlì„ ê°€ì ¸ê°€ë²„ë¦¬ëŠ” ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì„œë²„ì˜ express.staticì´ index.htmlì„ ê°€ì ¸ê°€ë²„ë¦¬ëŠ” ë¬¸ì œ</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// server/index.tsx</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">static</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìœ„ì™€ ê°™ì´ ì‘ì„±í•˜ë©´, â€˜../distâ€™ í´ë”ë¡œ ì ‘ê·¼í–ˆì„ ë•Œì˜ root url(<code class=\"language-text\">/</code>)ì´ index.htmlì„ ê°€ë¦¬í‚¤ê³  ìˆê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì—ì„œ root urlë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš° <code class=\"language-text\">app.get</code> ìš”ì²­ê¹Œì§€ ê°ˆ ìˆ˜ê°€ ì—†ì–´ ì›í•˜ëŠ” ì‘ë‹µì„ ë°›ì„ ìˆ˜ ì—†ë‹¤.</p>\n<p>ì•„ë˜ì™€ ê°™ì´ <code class=\"language-text\">{ index: false }</code> ì˜µì…˜ì„ ì œê³µí•˜ì—¬ <code class=\"language-text\">static</code> ë¯¸ë“¤ì›¨ì–´ê°€ root url(<code class=\"language-text\">/</code>)ì—ì„œ index.htmlì„ í¬í•¨ì‹œí‚¬ ìˆ˜ ì—†ë„ë¡ í•´ì£¼ë©´ ë¬¸ì œê°€ í•´ê²°ëœë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// server/index.tsx</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">static</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> index<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬</h2>\n<p>ìµœì¢…ì ìœ¼ë¡œ ì‘ì„±í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. (ì•„ë§ˆ ìˆ˜ì •ë  ê²ƒì´ë‹¤)</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// server/index.tsx</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOMServer <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/server\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StaticRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ServerStyleSheet<span class=\"token punctuation\">,</span> StyleSheetManager <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"styled-components\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ChunkExtractor <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@loadable/server\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> express <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> path <span class=\"token keyword\">from</span> <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> fs <span class=\"token keyword\">from</span> <span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"../src/App\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span> <span class=\"token operator\">||</span> <span class=\"token number\">9000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> sheet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerStyleSheet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">static</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> index<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> statsFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../dist/loadable-stats.json\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> extractor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ChunkExtractor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> statsFile <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/about\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/feeds/:feedId\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> extractor<span class=\"token punctuation\">.</span><span class=\"token function\">collectChunks</span><span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StyleSheetManager</span></span> <span class=\"token attr-name\">sheet</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sheet<span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StaticRouter</span></span> <span class=\"token attr-name\">location</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StaticRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StyleSheetManager</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> scriptTags <span class=\"token operator\">=</span> extractor<span class=\"token punctuation\">.</span><span class=\"token function\">getScriptTags</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> reactApp <span class=\"token operator\">=</span> ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>jsx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> styleTags <span class=\"token operator\">=</span> sheet<span class=\"token punctuation\">.</span><span class=\"token function\">getStyleTags</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> indexFile <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../dist/index.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span>indexFile<span class=\"token punctuation\">,</span> <span class=\"token string\">\"utf8\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Node.js ì„œë²„ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì„œë²„ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ğŸ”«\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> data\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;div id=\"root\">&lt;/div>'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;div id=\"root\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>reactApp<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>\n        <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;head>(.+)&lt;\\/head></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">s</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;head>$1 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>styleTags<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>scriptTags<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/head></span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Server is listening on port </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// webpack.server.js</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> nodeExternals <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"webpack-node-externals\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./server/index.tsx\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"dist-server\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[name].js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">publicPath</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">clean</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">\"production\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"development\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"production\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(tsx|ts)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-loader\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token literal-property property\">presets</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"@babel/preset-react\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"@babel/preset-typescript\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n              <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"@babel/plugin-transform-runtime\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"babel-plugin-styled-components\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"@loadable/babel-plugin\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.svg$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"@svgr/webpack\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(png|jpe?g|gif|webp|mp4)$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"asset/resource\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">generator</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">\"static/[name][ext]\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">extensions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\".tsx\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".ts\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"src\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"node_modules\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">externals</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">nodeExternals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">allowlist</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"react-markdown\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"unified\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"bail\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"is-plain-obj\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"trough\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"remark-rehype\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"mdast-util-to-hast\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"unist-util-generated\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// src/index.tsx</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BrowserRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> loadableReady <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@loadable/component\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"./App\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">loadableReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">hydrate</span><span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>(ì¶”ê°€) react-query ë°ì´í„° prefetchì™€ React Portal ë¬¸ì œ í•´ê²°\nğŸ€ <a href=\"https://zigsong.github.io/2021/10/09/wtc-week-34/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ì—¬ê¸°ì„œ ì½ê¸°</a></p>\n<hr>\n<p><strong>Ref</strong></p>\n<ul>\n<li><a href=\"https://simsimjae.tistory.com/389\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://simsimjae.tistory.com/389</a></li>\n<li><a href=\"https://minoo.medium.com/next-js-%EC%B2%98%EB%9F%BC-server-side-rendering-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-7608e82a0ab11\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://minoo.medium.com/next-js-ì²˜ëŸ¼-server-side-rendering-êµ¬í˜„í•˜ê¸°-7608e82a0ab11</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/react-server-side-rendering\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.digitalocean.com/community/tutorials/react-server-side-rendering</a></li>\n<li><a href=\"https://www.npmjs.com/package/webpack-node-externals\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.npmjs.com/package/webpack-node-externals</a></li>\n<li><a href=\"https://jamong-icetea.tistory.com/349\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://jamong-icetea.tistory.com/349</a></li>\n<li><a href=\"https://ko.reactjs.org/docs/react-dom-server.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://ko.reactjs.org/docs/react-dom-server.html</a></li>\n<li><a href=\"https://www.hanumoka.net/2018/11/08/node-20181108-node-path-join-vs-resolve/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.hanumoka.net/2018/11/08/node-20181108-node-path-join-vs-resolve/</a></li>\n</ul>","timeToRead":13,"frontmatter":{"title":"Next.js ì—†ì´ React ì•± SSR ì ìš©í•˜ê¸°","date":"October 02, 2021","description":null,"tags":["react"],"disqus":null},"fields":{"langKey":"en"}}},"pageContext":{"slug":"/frontend/ssr-without-next/","previous":{"fields":{"slug":"/wtc/wtc-week-33/","langKey":"en","directoryName":"wtc"},"frontmatter":{"date":"October 02, 2021","description":null,"title":"ìš°í…Œì½” 33ì£¼ì°¨ ê¸°ë¡","tags":["woowacourse"]}},"next":{"fields":{"slug":"/frontend/ec2-next/","langKey":"en","directoryName":"frontend"},"frontmatter":{"date":"October 02, 2021","description":null,"title":"EC2ë¡œ Next.js ì•± ë°°í¬í•˜ê¸°","tags":["aws","next"]}},"previousInSameTag":{"fields":{"slug":"/react/react-18/","langKey":"en","directoryName":"react"},"frontmatter":{"date":"October 03, 2021","description":null,"title":"React 18 í†ºì•„ë³´ê¸°","tags":["react"]}},"nextInSameTag":{"fields":{"slug":"/react/react-as-ui-runtime/","langKey":"en","directoryName":"react"},"frontmatter":{"date":"September 26, 2021","description":null,"title":"UI runtimeìœ¼ë¡œì„œì˜ ë¦¬ì•¡íŠ¸","tags":["react"]}},"translationsLink":[]}},"staticQueryHashes":["1522010811","1615650028","2894998521","3765107650","683610688"]}