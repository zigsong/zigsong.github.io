{"componentChunkName":"component---src-templates-blog-post-js","path":"/frontend/lottie/","result":{"data":{"site":{"siteMetadata":{"title":"ziglog","author":"zigsong","lang":"en"}},"markdownRemark":{"id":"6077d3e9-75f7-545c-9413-a132fef33695","excerpt":"다짜고짜 로티 써보기 회사 업무를 수행하던 중, 애니메이션을 렌더링해야하는 과제가 생겼다. mp4 파일로는 약 1MB가 넘는 크기의 영상이었고, (그리고 10개의 서로 다른 파일이 필요했다 😩) 브라우저에서 그대로 로드했을 시에는 리소스를 불러오는 데 시간이 걸려 UI…","html":"<p>다짜고짜 로티 써보기</p>\n<!-- more -->\n<hr>\n<p>회사 업무를 수행하던 중, 애니메이션을 렌더링해야하는 과제가 생겼다. mp4 파일로는 약 1MB가 넘는 크기의 영상이었고, (그리고 10개의 서로 다른 파일이 필요했다 😩) 브라우저에서 그대로 로드했을 시에는 리소스를 불러오는 데 시간이 걸려 UI상 딜레이가 많이 생겼다.</p>\n<p>디자이너 분께서 처음 파일을 건네주셨을 때부터 ‘로티’라는 것을 사용하면 좋을 것 같다고 말씀주셨고, 그렇게 이름만 들어봤던 로티를 사용해보게 되었다!</p>\n<p>(👇 얘 아님)</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 323px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/90dbae5dc2089c56ca8a43baad6c981f/89aeb/01.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 132.43243243243242%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"01\" title=\"01\" src=\"/static/90dbae5dc2089c56ca8a43baad6c981f/89aeb/01.png\" srcset=\"/static/90dbae5dc2089c56ca8a43baad6c981f/12f09/01.png 148w,\n/static/90dbae5dc2089c56ca8a43baad6c981f/e4a3f/01.png 295w,\n/static/90dbae5dc2089c56ca8a43baad6c981f/89aeb/01.png 323w\" sizes=\"(max-width: 323px) 100vw, 323px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<hr>\n<h2 id=\"로티lottie\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%ED%8B%B0lottie\" aria-label=\"로티lottie permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로티(Lottie)</h2>\n<p>로티(Lottie)는 오픈소스 모바일 라이브러리로, 애니메이션을 json data 파일로 만들어주는 플랫폼이다.</p>\n<p>애니메이션은 그냥 gif로 쓰면 될 일이 아닌가?</p>\n<p>그러나 프론트 개발자라면 누구나 알 것이다. gif는 대부분의 경우 절대금기 사항이라는 것을…</p>\n<p>gif를 사용하면 안 되는 이유는 다음과 같다.</p>\n<ul>\n<li>gif는 이미지컷들을 연결한 애니메이션으로 파일 크기가 아주 크다. 만약 하나의 웹페이지에서 여러 개의 gif를 하나 사용한다면, 로딩 속도가 매우 느릴 것이다.</li>\n<li>gif는 용량이 무거울 뿐 아니라, 고정된 크기로 렌더링 되기 때문에 해상도 대응이 어렵다.</li>\n<li>렌더링되는 색상에 한계가 있기 때문에 애니메이션의 품질이 떨어진다.</li>\n<li>재생 타이밍, 반복재생 여부 등을 커스텀하기가 어렵다.</li>\n</ul>\n<p>그렇다면, 왜 로티를 사용해야 하는가?</p>\n<ul>\n<li>로티는 json data파일로 제작되어 gif에 비해 파일 크기가 작다.</li>\n<li>vector 기반의 이미지로 생성되어 해상도에 구애받지 않는다.</li>\n<li>모든 색상을 렌더링할 수 있어 자연스러운 애니메이션을 연출할 수 있다.</li>\n<li>재생 타이밍, 반복재생 여부, 재생 속도 등을 손쉽게 커스텀할 수 있다.</li>\n</ul>\n<p>아무튼 이 포스팅은 로티가 짱이라는 것을 보여주기 위한 글이니, gif는 잠시 버려두고 로티에 대해 더 알아보도록 하자.</p>\n<hr>\n<h2 id=\"json으로-로티-이미지-생성하기\" style=\"position:relative;\"><a href=\"#json%EC%9C%BC%EB%A1%9C-%EB%A1%9C%ED%8B%B0-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"json으로 로티 이미지 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>json으로 로티 이미지 생성하기</h2>\n<p>로티 애니메이션을 재생해보려면 당연히 애니메이션 파일이 필요하다. 하지만 나는 디자이너가 아니기 때문에 뭘 만들 수는 없다. 하지만 또 다른 내가 이미지를 창작했다고 치고, <a href=\"https://lottiefiles.com/animation/images\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LottieFiles</a>에 들어가서 맘에 드는 이미지를 하나 다운로드해본다.</p>\n<p>아, 다운로드하려면 계정 만들어야 한다. 귀찮으니까 구글로 로그인한다.</p>\n<p>12월이기도 하고, 크리스마스 광인답게 크리스마스 관련 이미지를 검색했다.</p>\n<p>이렇게 우측 상단에 다운로드 버튼을 클릭하면, 어떤 파일 형식으로 받을 것인지 물어본다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/de19e8f9841bae4438d1169a43b8b20c/2bcd1/02.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 70.94594594594594%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABy0lEQVQ4y42TzW7TUBCF80CIB2BR2CHxBH0INrwPK9iwYYXKogilKkEBVhWISmQRNT9toji2Y8fX917fnw9dk6QOwRFHGo11bB/NnJnp6DihXMYUpcR7T8A2N/E3J5UmzQvGi5jrwZDh+A6lDR0rBEaUGOcOBPey93U21tZRGUOpNJkoWcQJizilMpZOWyV+I4C/55y1CCEoCol31O8ClNRE0RLnHJ3tjzuBptjmOXy4bVjIhGk642Y5rmMYjZjFI5ZphA2CHEHTt+zNGfmHPiWeTORII1FWoZxGqDV5sW4XbFaYrRKuLs6Zfb5ELiKUrvBuf0Ai+LiIjgsGvwKmX8559+IZg9cvMStJaSpKpVDGEIyw3lNZQ14UWGvbW/bO/alw9J33z0/4dHpK+vMaAq3NbiA1rMOsRbtg3fJGcD694cfZKwbdt0x+XdEvE3oy5qtK6cuEbyrlYzbjIr49PpSth5XWO64CHk96PBx1OZn0eDS55Mmkx4Nxl6e3fbSz92vTHMbBYjuLs6b2NXiYG01m9F4OvGtW+K9zO8a3oaO1Jo7jgwrbwjWiPkVnkc4SdGoPlVLM5/OaMGEVnPvvCPctq4q7VYqWsp7yb0EuOz7+yy3xAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"02\" title=\"02\" src=\"/static/de19e8f9841bae4438d1169a43b8b20c/fcda8/02.png\" srcset=\"/static/de19e8f9841bae4438d1169a43b8b20c/12f09/02.png 148w,\n/static/de19e8f9841bae4438d1169a43b8b20c/e4a3f/02.png 295w,\n/static/de19e8f9841bae4438d1169a43b8b20c/fcda8/02.png 590w,\n/static/de19e8f9841bae4438d1169a43b8b20c/efc66/02.png 885w,\n/static/de19e8f9841bae4438d1169a43b8b20c/c83ae/02.png 1180w,\n/static/de19e8f9841bae4438d1169a43b8b20c/2bcd1/02.png 1561w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>당연히 ‘Lottie JSON’으로 받는다. 그런데 생각보다 gif나 mp4의 용량도 크진 않다. (짧아서 그런가?) ‘Optimized Lottie JSON’도 있는데, 돈 내야 한다. 자본주의는 무서워 💸</p>\n<p>아무튼 .json 확장자 파일로 다운 받아서 열어보니, 다음과 같은 어마무시한 json 덩어리가 나타났다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"v\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"5.7.5\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"fr\"</span><span class=\"token operator\">:</span><span class=\"token number\">60</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ip\"</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"op\"</span><span class=\"token operator\">:</span><span class=\"token number\">60</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"w\"</span><span class=\"token operator\">:</span><span class=\"token number\">1080</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"h\"</span><span class=\"token operator\">:</span><span class=\"token number\">1080</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"nm\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Pre-comp 1\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ddd\"</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"assets\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"layers\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"ddd\"</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ind\"</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ty\"</span><span class=\"token operator\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"nm\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Shape Layer 7\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"parent\"</span><span class=\"token operator\">:</span><span class=\"token number\">27</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"sr\"</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ks\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"o\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token property\">\"a\"</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"k\"</span><span class=\"token operator\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"ix\"</span><span class=\"token operator\">:</span><span class=\"token number\">11</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ...(생략)</span></code></pre></div>\n<p>json prettifier로 🎀예쁘게🎀 만들어봤다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"v\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5.7.5\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"fr\"</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"ip\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"op\"</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"w\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1080</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"h\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1080</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"nm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Pre-comp 1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"ddd\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"assets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"layers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"ddd\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"ind\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"ty\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"nm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Shape Layer 7\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"parent\"</span><span class=\"token operator\">:</span> <span class=\"token number\">27</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"sr\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"ks\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"o\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"a\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"k\"</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"ix\"</span><span class=\"token operator\">:</span> <span class=\"token number\">11</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// ... (생략)</span></code></pre></div>\n<p>예뻐진 것 같긴 한데, 뭘 나타내는진 알 수 없다. 사실 알 필요는 없는 것 같다. 뭔가 <code class=\"language-text\">layers</code>도 있고 한 걸 보니 여러 레이어의 좌표를 겹친 이미지를 만들 거라는 건 뻔하다. 으이구 뻔해 🤦‍♀️</p>\n<p>파일을 받았으면 이제 렌더링해보자. 근데 json을 어떻게 화면에 렌더링함?</p>\n<hr>\n<h2 id=\"로티-라이브러리-비교\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%ED%8B%B0-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EB%B9%84%EA%B5%90\" aria-label=\"로티 라이브러리 비교 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로티 라이브러리 비교</h2>\n<p>로티 애니메이션을 그냥 HTML에서 렌더링하는 일은 (거의) 없을 것이다. 시대를 이끄는 우리 프론트 개발자들은 그런거 잊은지 오래다. 바로 리액트 렌더링하는 거다. (원래 그러면 안 된다.)</p>\n<p>뭘 갖다 쓰려면 참으로 손길이 많이 가는 리액트에서 로티를 그냥 렌더링해줄 리 없다. 라이브러리를 설치해야 한다.</p>\n<p>라이브러리 이름도 다 헷갈린다. 역시 일부 도구들은 개발자를 더 혼란스럽게 만든 후 헷갈리지 않고 살아남는 자만 건지려는 시험 전략을 쓰는 것이 틀림없다.</p>\n<p>react-lottie, lottie-web, lottie-react 세 가지 라이브러리를 비교해볼 것이다. 선정 이유는… 그냥 세 개가 제일 먼저 띄었다. 눈에 띄지 않는 애들은 이미 도태된 것이다. <del>우리 역시 도태되지 않게 노력해야 할 것이다. 그냥 도태되고 편하게 살고 싶다면 어쩔 수 없지만…</del></p>\n<h3 id=\"-npm-trends\" style=\"position:relative;\"><a href=\"#-npm-trends\" aria-label=\" npm trends permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🍀 npm-trends</h3>\n<p><a href=\"https://npmtrends.com/lottie-react-vs-lottie-web-vs-react-lottie\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">npm trends</a>에 세 개의 라이브러리를 비교해보면, <code class=\"language-text\">lottie-react</code>는 한 물 간듯 하고(star 수도 348 뿐이다.), <code class=\"language-text\">lottie-web</code>의 사용률이 압도적으로 높다. <code class=\"language-text\">lottie-web</code>이 유난히 높은 이유는, 뒤에서도 설명하겠지만, react 전용 라이브러리가 아니기 때문인 것 같다.</p>\n<br>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/64314e51805901fce04f688ce7888982/fc99f/03.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 58.10810810810811%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABcUlEQVQoz41Si47jMAjM/39me7dqct1rEj/BmDmBm2wrrVZnawSyYWCMp+v1imVZcLvdYP48z47L5YLH4wFbqor/XVOthForGjN67w4ROX0jMxz+cf4d7H76/Rm9k3T/hZg+8bHN2OoOIgYROawgM5/2R8J5WRBCQAw7ckng1iC9m1CHi30qPrr9UbJ1YBKZm1c/EvYqCIXR84pcAh51g3B7Iz5xlLcOjeTr4RXq3QE1BXAOUGlojVGF0Ptr8guxtIGD0B/7tZIzBqCso0AXhydxgVKE1vBEHCj7ICSqo5owlNK4pIhuSZyhZRsEhryOmIO8C7rZl44nSvsILGGQyhGsz6BzJvh2Hm+ybChM0PIXXQX9uUUFrATR9mXtLXsDSUOVhtzIURpj54RgaqzDNSd8hA1zDFhSdPxJEfeYhs3Z7ZIC5rifMfeccE8JS4xYC2ErYxaTyajUwM0+JxzSgVoZIuq+D74rGsu7WvvM8n72D73wrtzq9unVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"03\" title=\"03\" src=\"/static/64314e51805901fce04f688ce7888982/fcda8/03.png\" srcset=\"/static/64314e51805901fce04f688ce7888982/12f09/03.png 148w,\n/static/64314e51805901fce04f688ce7888982/e4a3f/03.png 295w,\n/static/64314e51805901fce04f688ce7888982/fcda8/03.png 590w,\n/static/64314e51805901fce04f688ce7888982/efc66/03.png 885w,\n/static/64314e51805901fce04f688ce7888982/c83ae/03.png 1180w,\n/static/64314e51805901fce04f688ce7888982/fc99f/03.png 2702w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h3 id=\"-번들-크기\" style=\"position:relative;\"><a href=\"#-%EB%B2%88%EB%93%A4-%ED%81%AC%EA%B8%B0\" aria-label=\" 번들 크기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🍀 번들 크기</h3>\n<p>minified 기준으로 보면,</p>\n<ul>\n<li>react-lottie (ver 1.2.3) - 68.4kB</li>\n<li>lottie-web (ver 5.10.0) - 71.5kB</li>\n<li>lottie-react (ver 2.3.1) - 70.9kB</li>\n</ul>\n<p>로 거의 차이는 없다. <del>세상 많이 좋아졌다.</del></p>\n<h3 id=\"-관리-현황-버전\" style=\"position:relative;\"><a href=\"#-%EA%B4%80%EB%A6%AC-%ED%98%84%ED%99%A9-%EB%B2%84%EC%A0%84\" aria-label=\" 관리 현황 버전 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🍀 관리 현황 (버전)</h3>\n<ul>\n<li>react-lottie - ver 1.2.3으로, 마지막 release가 2018년이다. 처음으로 생겼으나 버려진 게 틀림없다… <del>원래 첫째들은 대충 키워 무관심 속에 방치되기 마련이다. 내가 첫째라 그런 건 아니다.</del></li>\n<li>lottie-web - ver 5.10.0으로, 최근까지도 계속 업데이트되고 있다. star 수와 issue도 가장 많다.</li>\n<li>lottie-react - ver 2.3.1로, 마지막 release는 6개월 전이다. 핫하진 않지만, 꾸준히 사용되고 있는 듯하다. 이게 바로 스테디셀러?</li>\n</ul>\n<p>이제 또 뭘 비교해야 할까. 그냥 바로 사용 방법으로 넘어가보자.</p>\n<hr>\n<h2 id=\"리액트에서-로티-로드하기\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%97%90%EC%84%9C-%EB%A1%9C%ED%8B%B0-%EB%A1%9C%EB%93%9C%ED%95%98%EA%B8%B0\" aria-label=\"리액트에서 로티 로드하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리액트에서 로티 로드하기</h2>\n<h3 id=\"1-react-lottie\" style=\"position:relative;\"><a href=\"#1-react-lottie\" aria-label=\"1 react lottie permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. react-lottie</h3>\n<p><a href=\"https://lottiefiles.com/kr/blog/about-lottie/kr-working-with-lottie-how-to-use-lottie-in-react-app\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LottiFiles 블로그</a>에서 공식적으로 지원하는 방법은 <code class=\"language-text\">react-lottie</code>를 사용하는 것이다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Lottie <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-lottie\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> animationData <span class=\"token keyword\">from</span> <span class=\"token string\">\"./lotties/merry-christmas.json\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> defaultOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">loop</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">autoplay</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">animationData</span><span class=\"token operator\">:</span> animationData<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">rendererSettings</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">preserveAspectRatio</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xMidYMid slice\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Lottie</span></span> <span class=\"token attr-name\">options</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>defaultOptions<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">height</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">400</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">width</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">400</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 작성하라는데, <code class=\"language-text\">DependencyNotFoundError</code>가 난다. ㅡㅡ 하라는 대로 했는데.</p>\n<p><code class=\"language-text\">react-lottie</code>를 쓰려면 <code class=\"language-text\">prop-types</code>도 깔란다. 그냥 좀 해주지</p>\n<p>아무튼 <code class=\"language-text\">prop-types</code>도 디펜던시에 추가한다. 그러면 잘 렌더링이 되는 것을 볼 수 있다.</p>\n<br />\n<iframe src=\"https://codesandbox.io/embed/practical-smoke-z7g4xv?fontsize=14&hidenavigation=1&theme=dark\"\n     style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"practical-smoke-z7g4xv\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n   ></iframe>\n<p>위 코드의 <code class=\"language-text\">defaultOptions</code>에 들어있는 항목들은 이름만 보면 대충 감이 온다.</p>\n<ul>\n<li><code class=\"language-text\">loop</code>: 반복 재생 여부. <code class=\"language-text\">true</code>일 때는 무한 반복하며, 숫자를 입력하면 해당 횟수만큼 반복한다.</li>\n<li><code class=\"language-text\">autoplay</code>: 자동 재생 여부</li>\n<li><code class=\"language-text\">animationData</code>: 재생할 lottie json 파일</li>\n<li><code class=\"language-text\">rendererSettings</code>: 이미지의 비율이나 className 등을 추가할 수 있다.</li>\n</ul>\n<p>위 네 가지는 필수로 설정해줘야 하는 항목이다. 이밖에도 <code class=\"language-text\">react-lottie</code>에는 <code class=\"language-text\">onComplete</code>, <code class=\"language-text\">onDestroy</code> 등의 prop을 추가할 수 있으며, <code class=\"language-text\">play()</code>, <code class=\"language-text\">stop()</code> 등의 메서드를 사용할 수 있다.</p>\n<h3 id=\"2-lottie-web\" style=\"position:relative;\"><a href=\"#2-lottie-web\" aria-label=\"2 lottie web permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. lottie-web</h3>\n<p><code class=\"language-text\">lottie-web</code>은 에어비앤비에서 만든 라이브러리로, 안드로이드, iOS, React Native, 그리고 윈도우에서 사용할 수 있다.</p>\n<p>이렇게 범용적이라는 사실은… React JSX 렌더링이나 hook에 특화되어 있지 않다는 뜻이다! 😱 <del>원래 이것저것 여러가지 메뉴 파는 집은 맛이 없다. 한 두 가지 메뉴만 전문적으로 파는 식당이 진짜 맛집</del></p>\n<p>렌더링하는 컴포넌트에 직접 <code class=\"language-text\">stop()</code>, <code class=\"language-text\">play()</code> 등의 메서드를 prop으로 전달하는 대신, 라이브러리에서 제공하는 <code class=\"language-text\">lottie</code> 객체의 <code class=\"language-text\">loadAnimation()</code>을 통해 로드한 애니메이션을 직접 제어하는 방식으로 코드를 작성한다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> lottie <span class=\"token keyword\">from</span> <span class=\"token string\">\"lottie-web\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> animationData <span class=\"token keyword\">from</span> <span class=\"token string\">\"./lotties/merry-christmas.json\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isStopped<span class=\"token punctuation\">,</span> setIsStopped<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isPaused<span class=\"token punctuation\">,</span> setIsPaused<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> animationRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    animationRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> lottie<span class=\"token punctuation\">.</span><span class=\"token function\">loadAnimation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> animationRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">renderer</span><span class=\"token operator\">:</span> <span class=\"token string\">\"svg\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">loop</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">autoplay</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      animationData<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>animationRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>react에서는 <code class=\"language-text\">useRef</code>을 사용하여 로티 애니메이션을 재생할 dom 요소를 지정하고, <code class=\"language-text\">ref.current.play()</code>와 같은 방식으로 애니메이션을 직접 제어한다.</p>\n<br />\n<iframe src=\"https://codesandbox.io/embed/adoring-villani-5h5hkq?fontsize=14&hidenavigation=1&theme=dark\"\n     style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"adoring-villani-5h5hkq\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n   ></iframe>\n<p>width, height를 지정해주지 않았더니 무지 부담스럽게 커졌다. ㅋㅋ <del>뭐든지 멀리서 보아야 아름답다. 로티도 그렇다.</del> (‘자세히 보아야 아름답다’가 맞는 시 구절이다.) 아무튼 성공적으로 로드했다.</p>\n<h3 id=\"3-lottie-react\" style=\"position:relative;\"><a href=\"#3-lottie-react\" aria-label=\"3 lottie react permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. lottie-react</h3>\n<p>1번과 이름이 비슷하지만, <code class=\"language-text\">react-lottie</code>와 다른 <code class=\"language-text\">lottie-react</code>다.</p>\n<p>라이브러리 내부에서 react hook을 사용하기 때문에 react v16.8.0 이상을 사용할 것을 권장한다. 역시 fancy한 것은 특정 세대에만 국한되어 있다. <del>요즈음의 MZ세대를 겨냥한 것이랄까…</del></p>\n<p><code class=\"language-text\">lottie-react</code>를 일반 컴포넌트처럼 사용한다면 아래처럼 작성한다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Lottie <span class=\"token keyword\">from</span> <span class=\"token string\">\"lottie-react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> animationData <span class=\"token keyword\">from</span> <span class=\"token string\">\"./lotties/merry-christmas.json\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Lottie</span></span> <span class=\"token attr-name\">animationData</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>animationData<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">loop</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>요즘 애들 쓰는 방식대로 핫하게 살고 싶다면, <code class=\"language-text\">lottie-react</code>에서 제공하는 hook을 사용하여 아래처럼 작성한다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useLottie <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"lottie-react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> animationData <span class=\"token keyword\">from</span> <span class=\"token string\">\"./lotties/merry-christmas.json\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    animationData<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">loop</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> View <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useLottie</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>View<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">useLottie</code> hook을 사용하여 애니메이션을 렌더링한 예제는 아래와 같다.</p>\n<br />\n<iframe src=\"https://codesandbox.io/embed/adoring-villani-5h5hkq?fontsize=14&hidenavigation=1&theme=dark\"\n     style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"adoring-villani-5h5hkq\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n   ></iframe>\n<p><code class=\"language-text\">useLottie</code> hook은 다음과 같이 <code class=\"language-text\">View</code> 컴포넌트에 여러 가지 옵션들을 prop으로 넣어 렌더링하는 형태로 되어있다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> useLottie <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> LottieOptions<span class=\"token punctuation\">,</span>\n  style<span class=\"token operator\">?</span><span class=\"token operator\">:</span> CSSProperties\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">View</span><span class=\"token operator\">:</span> ReactElement <span class=\"token punctuation\">}</span> <span class=\"token operator\">&amp;</span> <span class=\"token parameter\">LottieRefCurrentProps</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    animationData<span class=\"token punctuation\">,</span>\n    loop<span class=\"token punctuation\">,</span>\n    autoplay<span class=\"token punctuation\">,</span>\n    initialSegment<span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...</span>\n    lottieRef<span class=\"token punctuation\">,</span>\n    renderer<span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">,</span>\n    assetsPath<span class=\"token punctuation\">,</span>\n    rendererSettings<span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>rest\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>animationLoaded<span class=\"token punctuation\">,</span> setAnimationLoaded<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> animationInstanceRef <span class=\"token operator\">=</span> useRef<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AnimationItem</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">();\n  const animationContainer = useRef</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HTMLDivElement</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(null);\n  // ...\n\n  const play = (): void => </span><span class=\"token punctuation\">{</span>\n    animationInstanceRef<span class=\"token punctuation\">.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\n  const stop = (): void => </span><span class=\"token punctuation\">{</span>\n    animationInstanceRef<span class=\"token punctuation\">.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n\n  const View = </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>animationContainer<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>rest<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">;\n\n  return </span><span class=\"token punctuation\">{</span>\n    View<span class=\"token punctuation\">,</span>\n    play<span class=\"token punctuation\">,</span>\n    stop<span class=\"token punctuation\">,</span>\n    pause<span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token literal-property property\">animationContainerRef</span><span class=\"token operator\">:</span> animationContainer<span class=\"token punctuation\">,</span>\n    animationLoaded<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">animationItem</span><span class=\"token operator\">:</span> animationInstanceRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">;\n};</span></code></pre></div>\n<p>어디서 많이 본듯한? 🫢</p>\n<p>2번의 <code class=\"language-text\">lottie-web</code>을 한번 wrapping한 형태의 라이브러리기 때문이다. hook을 제공하여 보다 편리하게 사용할 수 있도록 해준다.</p>\n<blockquote>\n<p>자세한 코드는 <a href=\"https://github.com/Gamote/lottie-react/blob/main/src/hooks/useLottie.tsx\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">lottie-react github</a>에서 알아보자.</p>\n</blockquote>\n<p><strong>🤨 그래서, 어떤 라이브러리?</strong></p>\n<p>나름대로 결론을 내보았다.</p>\n<ul>\n<li>많은 커스텀 설정은 필요없고, 그냥 한번 로티 애니메이션을 띄워보고 싶다면 👉 react-lottie</li>\n<li>리액트 뿐 아니라 웹을 사용하는 곳에서 범용적으로 로티 애니메이션을 로드하고자 한다면 👉 lottie-web</li>\n<li>hook을 사용하고 싶고, 라이브러리에서 정해준 대로 편하게 살고 싶다면 👉 lottie-react</li>\n</ul>\n<p>(프로젝트에서는 lottie-web을 사용하기로 했다. 위 이유들과는 상관없을지 모르지만… 추후 여러 커스텀 설정들을 추가해볼 수 있으니까!)</p>\n<p>(그리고 lottie-web이 레퍼런스도 가장 많다.)</p>\n<hr>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>로티 파일이 어떻게 웹에서 로드되는지 살펴보았다. json으로 애니메이션 로드라니. 뭔가 대단히 낯설고 신기한 방법같아 보였는데 엄청난걸 알아내진 못했다. 그냥 라이브러리 비교나 한 것 같다.</p>\n<p><del>그리고 주말엔 롯데월드에 다녀왔다. 로티의 크리스마스 퍼레이드를 보았다.</del></p>\n<p>사실 로티는 개발자가 아니라 디자이너들한테 더 핫한 라이브러리인 것 같다. 이러나 저러나 애니메이션 렌더링에 큰 도움을 주었으니 훌륭한 도구인 것으로… 😎</p>\n<hr>\n<p><strong>Ref</strong></p>\n<ul>\n<li><a href=\"https://lottiefiles.com/blog/tips-and-tutorials/lottie-vs-gif\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://lottiefiles.com/blog/tips-and-tutorials/lottie-vs-gif</a></li>\n<li><a href=\"https://creattie.com/blog/gif-vs-lottie\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://creattie.com/blog/gif-vs-lottie</a></li>\n<li><a href=\"https://congjang.medium.com/f-%EB%B2%88%EC%99%B8%ED%8E%B8-lottie%EB%A1%9C-animation-%EB%A7%8C%EB%93%A4%EA%B8%B0-93135f18e450\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://congjang.medium.com/f-번외편-lottie로-animation-만들기-93135f18e450</a></li>\n<li><a href=\"https://lottiefiles.com/kr/blog/about-lottie/kr-working-with-lottie-how-to-use-lottie-in-react-app\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://lottiefiles.com/kr/blog/about-lottie/kr-working-with-lottie-how-to-use-lottie-in-react-app</a></li>\n<li><a href=\"https://lottiereact.com/components/Lottie\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://lottiereact.com/components/Lottie</a></li>\n</ul>","timeToRead":9,"frontmatter":{"title":"로티로 애니메이션 만들기","date":"December 08, 2022","description":null,"tags":["frontend","main"],"disqus":null},"fields":{"langKey":"en"}}},"pageContext":{"slug":"/frontend/lottie/","previous":{"fields":{"slug":"/weekly/2022-12-week-2/","langKey":"en","directoryName":"weekly"},"frontmatter":{"date":"December 10, 2022","description":"weekly-i-learned","title":"12월 2주차 기록","tags":["weekly"]}},"next":{"fields":{"slug":"/weekly/2022-12-week-1/","langKey":"en","directoryName":"weekly"},"frontmatter":{"date":"December 04, 2022","description":"weekly-i-learned","title":"12월 1주차 기록","tags":["weekly"]}},"previousInSameTag":{"fields":{"slug":"/frontend/compare-js-bundlers/","langKey":"en","directoryName":"frontend"},"frontmatter":{"date":"January 05, 2023","description":null,"title":"자바스크립트 번들러 비교","tags":["frontend"]}},"nextInSameTag":{"fields":{"slug":"/javascript/js-functional-programming/","langKey":"en","directoryName":"javascript"},"frontmatter":{"date":"December 03, 2021","description":null,"title":"자바스크립트 함수형 프로그래밍과 파이프","tags":["javascript","main"]}},"translationsLink":[]}},"staticQueryHashes":["1522010811","2466007692","2894998521","3765107650","683610688"]}