{"componentChunkName":"component---src-templates-blog-post-js","path":"/react/react-query-debounce/","result":{"data":{"site":{"siteMetadata":{"title":"ziglog","author":"zigsong","lang":"en"}},"markdownRemark":{"id":"9e53a7a0-cac1-5261-b386-b794a0feaa0a","excerpt":"react queryì—ì„œ hookìœ¼ë¡œ debounce ì“°ê¸° í”¼ë“œ ì—…ë¡œë“œ ì‹œ ê¸°ìˆ ìŠ¤íƒì„ ë“±ë¡í•  ë•Œ, ì‚¬ìš©ìê°€ inputì„ ì…ë ¥í•  ë•Œë§ˆë‹¤ í•´ë‹¹ ë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” ê¸°ìˆ  ìŠ¤íƒì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ auto complete ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆë‹¤. ì´ë•Œ ëª¨ë“  inputë§ˆë‹¤ api requestâ€¦","html":"<p>react queryì—ì„œ hookìœ¼ë¡œ debounce ì“°ê¸°</p>\n<!-- more -->\n<hr>\n<p>í”¼ë“œ ì—…ë¡œë“œ ì‹œ ê¸°ìˆ ìŠ¤íƒì„ ë“±ë¡í•  ë•Œ, ì‚¬ìš©ìê°€ inputì„ ì…ë ¥í•  ë•Œë§ˆë‹¤ í•´ë‹¹ ë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” ê¸°ìˆ  ìŠ¤íƒì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ auto complete ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆë‹¤. ì´ë•Œ ëª¨ë“  inputë§ˆë‹¤ api requestê°€ ê°€ëŠ” ê²ƒì€ ë‚­ë¹„ì¼ ë¿ë”ëŸ¬ í™”ë©´ì´ ë§¤ìš° ë²„ë²…ì´ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— debounceë¥¼ ê±¸ì–´ ì–´ëŠ ì •ë„ ì‚¬ìš©ìì˜ ì…ë ¥ì´ ëë‚˜ëŠ” íƒ€ì´ë°ì— apië¥¼ í˜¸ì¶œí•´ì£¼ê¸°ë¡œ í–ˆë‹¤.</p>\n<blockquote>\n<p>ğŸ‘¾ debounceë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ì‹œê°„ ë™ì•ˆ ë°œìƒëœ ì´ë²¤íŠ¸ë¥¼ ê·¸ë£¹í™”í•˜ì—¬ ê°€ì¥ ë§ˆì§€ë§‰ ì´ë²¤íŠ¸ì— ëŒ€í•´ì„œë§Œ ë™ì‘ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</p>\n</blockquote>\n<p>ê·¸ëŸ°ë° http requestì— <strong>react-query</strong>ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì¼ë°˜ì ì¸ ë°©ì‹ì˜ debounceë¡œëŠ” api call íšŸìˆ˜ë¥¼ ì¡°ì ˆí•˜ê¸°ê°€ ì–´ë ¤ì› ë‹¤. ì‚¬ìš©ì inputì— ë”°ë¼ ê¸°ìˆ ìŠ¤íƒì„ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì˜ queryëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// useTechs.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">useTechs</span><span class=\"token punctuation\">(</span>autoComplete<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token generic-function\"><span class=\"token function\">useQuery</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Tech<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"techs\"</span><span class=\"token punctuation\">,</span> autoComplete<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> getTechs<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    enabled<span class=\"token operator\">:</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>autoComplete<span class=\"token punctuation\">,</span>\n    suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">enabled</code> ì˜µì…˜ì„ ê±¸ì–´ ì‚¬ìš©ìì˜ inputì— í•´ë‹¹í•˜ëŠ” <code class=\"language-text\">autoComplete</code>ì´ ë³€í•  ë•Œë§ˆë‹¤ <code class=\"language-text\">getTechs</code> í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•˜ëŠ” dependencyë¥¼ ì´ë¯¸ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì´ê³³ì— ìƒˆë¡œ <code class=\"language-text\">setTimeout</code> ë“±ì„ ì´ìš©í•œ debounce ì¡°ê±´ì„ ë¶™ì—¬ì£¼ê¸°ê°€ ë‚œê°í–ˆë‹¤. ê·¸ë˜ì„œ inputì˜ valueê°€ <code class=\"language-text\">useTechs</code>ì˜ ì¸ìë¡œ ë“¤ì–´ì˜¤ê¸° ì „ì— ë”œë ˆì´ë¥¼ ê±¸ì–´ì£¼ê¸°ë¡œ í–ˆë‹¤.</p>\n<p>ìš°ì„  ì™„ì„±ëœ debounce hook ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// useQueryDebounce.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useQueryDebounce</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> delay <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>debounceValue<span class=\"token punctuation\">,</span> setDebounceValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> handler<span class=\"token operator\">:</span> NodeJS<span class=\"token punctuation\">.</span>Timeout <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setDebounceValue</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> debounceValue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> useQueryDebounce<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì¸ìë¡œ ë“¤ì–´ì˜¨ <code class=\"language-text\">value</code>, ì¦‰ ì‚¬ìš©ìì˜ inputì´ ë³€í•  ë•Œë§ˆë‹¤ hook ë‚´ë¶€ì˜ <code class=\"language-text\">useEffect</code>ê°€ í˜¸ì¶œëœë‹¤. ì´ë•Œ ì§€ì •í•œ <code class=\"language-text\">delay</code>ê°€ ì§€ë‚˜ì•¼ë§Œ <code class=\"language-text\">debounceValue</code>ê°€ ë°”ë€ë‹¤.</p>\n<p>ê°’ì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” debounceë¡œ í•œ ì°¨ë¡€ ê±¸ëŸ¬ë‚¸ input(<code class=\"language-text\">debouncedSearchInput</code>)ì„ <code class=\"language-text\">useQuery</code>ì˜ ì¸ìë¡œ ë„˜ê²¨ì¤€ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// TechInput.tsx</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TechInput</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> debouncedSearchInput <span class=\"token operator\">=</span> <span class=\"token function\">useQueryDebounce</span><span class=\"token punctuation\">(</span>searchInput<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> techs <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTechs</span><span class=\"token punctuation\">(</span>debouncedSearchInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<img src=\"/25cf5db0ff86ff4b82d8eee338ebdb29/01.gif\" width=\"560px\">\n<p>ì‚¬ìš©ìê°€ í•œ ê¸€ìì”© ì…ë ¥í•  ë•Œë§ˆë‹¤ ìš”ì²­ì´ ë°œìƒí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì ì‹œ ê¸°ë‹¤ë¦° í›„ ìš”ì²­ì´ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ëª¨ë“  input changeë§ˆë‹¤ requestê°€ ë°œìƒí•˜ì§€ ì•Šê³  ì¡°ê¸ˆ delayë¥¼ ë‘ê³  requestë¥¼ ë³´ë‚´ê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ ìš”ì²­ íšŸìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.</p>\n<hr>\n<p><strong>Ref</strong>\n<a href=\"https://dev.to/arnonate/debouncing-react-query-with-hooks-2ek6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://dev.to/arnonate/debouncing-react-query-with-hooks-2ek6</a></p>","timeToRead":2,"frontmatter":{"title":"react queryì—ì„œ debounce ì“°ê¸°","date":"July 24, 2021","description":null,"tags":["frontend"],"disqus":null},"fields":{"langKey":"en"}}},"pageContext":{"slug":"/react/react-query-debounce/","previous":{"fields":{"slug":"/etc/geultto-start/","langKey":"en","directoryName":"etc"},"frontmatter":{"date":"July 25, 2021","description":null,"title":"ê¸€ë˜ 6ê¸°ë¥¼ ì‹œì‘í•˜ë©°","tags":["ê¸€ë˜"]}},"next":{"fields":{"slug":"/frontend/file-input/","langKey":"en","directoryName":"frontend"},"frontmatter":{"date":"July 18, 2021","description":null,"title":"file input ë‹¤ë£¨ëŠ” ë²•","tags":["frontend"]}},"previousInSameTag":{"fields":{"slug":"/react/react-hook-test/","langKey":"en","directoryName":"react"},"frontmatter":{"date":"August 01, 2021","description":null,"title":"ë¦¬ì•¡íŠ¸ í›… í…ŒìŠ¤íŠ¸","tags":["frontend"]}},"nextInSameTag":{"fields":{"slug":"/frontend/file-input/","langKey":"en","directoryName":"frontend"},"frontmatter":{"date":"July 18, 2021","description":null,"title":"file input ë‹¤ë£¨ëŠ” ë²•","tags":["frontend"]}},"translationsLink":[]}},"staticQueryHashes":["1522010811","1615650028","2894998521","3765107650","683610688"]}